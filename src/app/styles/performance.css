/* ============================================
   PERFORMANCE OPTIMIZATIONS
   GPU acceleration, content-visibility, will-change
   ============================================ */

/* Content-visibility for off-screen sections */
.hero-section,
.services-section,
.intro-wrapper,
.newsletter-section,
.contact-section,
.frame-cta {
  content-visibility: auto;
  contain-intrinsic-size: auto 800px;
}

/* ============================================
   MOBILE ANIMATION OPTIMIZATIONS
   Reduce animations on mobile for better performance
   ============================================ */

/* Reduce complex animations on mobile devices */
@media (max-width: 768px) {
  /* Simplify backdrop blur - very expensive on mobile */
  .holographic-card,
  .card-glass,
  .glass-effect,
  nav,
  .terminal-container {
    backdrop-filter: blur(4px) !important;
    -webkit-backdrop-filter: blur(4px) !important;
  }
  
  /* Disable parallax and fixed backgrounds */
  *[style*="background-attachment: fixed"] {
    background-attachment: scroll !important;
  }
  
  /* Reduce shadow complexity */
  .holographic-card,
  .card-base,
  .blog-card {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
  }
  
  /* Disable transform animations on cards during scroll */
  .is-scrolling .holographic-card,
  .is-scrolling .blog-card,
  .is-scrolling .featured-item-wrapper {
    transform: none !important;
    transition: none !important;
  }
  
  /* Reduce glitch animation intensity on mobile */
  .quote-glitch-active::before,
  .quote-glitch-active::after,
  .main-heading-glitch::before,
  .main-heading-glitch::after {
    display: none !important;
  }
  
  /* Simplify terminal animations */
  .terminal-scanline {
    display: none !important;
  }
  
  /* Reduce neon effects */
  .neon-text,
  .logoNeon b {
    text-shadow: none !important;
    animation: none !important;
  }
}

/* Further optimizations for very slow devices */
@media (max-width: 480px) {
  /* Disable all backdrop filters on small devices */
  * {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
  
  /* Use solid backgrounds instead */
  nav,
  .holographic-card,
  .terminal-container {
    background-color: var(--bg-secondary) !important;
  }
}

/* Respect user preferences for reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .terminal-cursor,
  .ellipsis-anim::after,
  .rabbit-hole-spiral {
    animation: none !important;
  }
}

/* GPU layer promotion for animated elements */
.card-image,
.blog-card,
.service-card,
.holographic-card,
.project-card {
  will-change: transform;
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Active/hover states with GPU acceleration */
.card-image:hover,
.blog-card:hover,
.service-card:hover,
.holographic-card:hover,
.project-card:hover {
  will-change: transform, opacity;
}

/* Promote navigation to GPU for smooth scroll */
nav,
.minimap-container,
.toc-sidebar {
  will-change: transform;
  transform: translateZ(0);
}

/* Optimize animated backgrounds */
.glitch-animation-container,
.stopwatch-wrapper,
.neon-text {
  will-change: transform;
  transform: translateZ(0);
}

/* Remove will-change after animation completes */
.animation-complete {
  will-change: auto;
}

/* Optimize images for paint */
img,
picture,
video {
  content-visibility: auto;
}

/* Contain layout shifts */
.blog-grid,
.project-grid,
.services-grid {
  contain: layout style paint;
}

/* Optimize scroll containers */
.blog-filters,
.filter-panel-content,
.minimap-container {
  contain: layout style;
  overflow: auto;
  overscroll-behavior: contain;
}

/* Force GPU compositing for smooth animations */
@media (prefers-reduced-motion: no-preference) {
  .animate-on-scroll,
  .fade-in-view,
  [data-animate="true"] {
    will-change: transform, opacity;
    transform: translateZ(0);
  }
}

/* Clean up will-change after transitions */
* {
  transition-property: transform, opacity, color, background-color, border-color;
}

*:not(:hover):not(:focus):not(:active) {
  will-change: auto;
}

