{"version":3,"file":"static/chunks/app/blog/[category]/[slug]/page-8a3a630004b6247b.js","mappings":"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","sources":["webpack://_N_E/?cd8f","webpack://_N_E/./src/app/blog/BlogSidebarClient.tsx","webpack://_N_E/./src/app/blog/[category]/[slug]/BlogPageClient.tsx","webpack://_N_E/./src/components/Blog/DisqusComments.tsx","webpack://_N_E/./src/components/Blog/GiscusClient.tsx","webpack://_N_E/./src/components/ResponsiveImage.tsx","webpack://_N_E/./src/components/MarkdownRenderer.tsx","webpack://_N_E/./src/components/SEO/ArticleSchema.tsx","webpack://_N_E/./src/components/ScrollTracking.tsx"],"sourcesContent":["import(/* webpackMode: \"eager\" */ \"/home/runner/work/manicinc/manicinc/node_modules/next/dist/client/image-component.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"/home/runner/work/manicinc/manicinc/node_modules/next/dist/client/link.js\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"default\"] */ \"/home/runner/work/manicinc/manicinc/src/app/blog/[category]/[slug]/BlogPageClient.tsx\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"default\"] */ \"/home/runner/work/manicinc/manicinc/src/app/blog/BlogSidebarClient.tsx\");\n;\nimport(/* webpackMode: \"eager\" */ \"/home/runner/work/manicinc/manicinc/src/app/styles/blogs.css\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"default\"] */ \"/home/runner/work/manicinc/manicinc/src/components/Blog/DisqusComments.tsx\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"default\"] */ \"/home/runner/work/manicinc/manicinc/src/components/Blog/GiscusClient.tsx\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"default\"] */ \"/home/runner/work/manicinc/manicinc/src/components/BlogAnalytics.tsx\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"default\"] */ \"/home/runner/work/manicinc/manicinc/src/components/BlogNewsletterProvider.tsx\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"default\"] */ \"/home/runner/work/manicinc/manicinc/src/components/BlogNewsletterSection.tsx\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"default\"] */ \"/home/runner/work/manicinc/manicinc/src/components/EnhancedTracking.tsx\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"IconArrowLeft\",\"IconOrnateAuthor\",\"IconOrnateCalendar\",\"IconOrnateClock\",\"IconOrnateTag\"] */ \"/home/runner/work/manicinc/manicinc/src/components/Icons.tsx\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"CustomMarkdownRenderer\"] */ \"/home/runner/work/manicinc/manicinc/src/components/MarkdownRenderer.tsx\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"default\"] */ \"/home/runner/work/manicinc/manicinc/src/components/RelatedContent.tsx\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"default\"] */ \"/home/runner/work/manicinc/manicinc/src/components/ScrollTracking.tsx\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"default\"] */ \"/home/runner/work/manicinc/manicinc/src/components/SEO/ArticleSchema.tsx\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"default\"] */ \"/home/runner/work/manicinc/manicinc/src/components/SEO/BreadcrumbSchema.tsx\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"default\"] */ \"/home/runner/work/manicinc/manicinc/src/components/ShareButtonsClient.tsx\");\n;\nimport(/* webpackMode: \"eager\", webpackExports: [\"AsciiArtPlaceholder\"] */ \"/home/runner/work/manicinc/manicinc/src/lib/asciiPlaceholders.tsx\");\n","// src/app/blog/BlogSidebarClient.tsx\n'use client';\n\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport type { TableOfContentsItem } from \"@/types/blog\";\nimport { BookOpen, List, X, Hash, Home, Settings2, ChevronsLeft, ChevronsRight, ArrowUp } from 'lucide-react';\nimport Link from 'next/link';\nimport {\n    IconCloseFlourish, IconOpenFlourish, IconPageTurnNext,\n    IconPageTurnPrev, IconOrnateUpArrow, IconOrnateList\n} from '@/components/Icons'; // Ensure path is correct\nimport ScrollToTop from '@/components/ScrollBtns/ScrollToTop';\n\n// --- Helper Functions ---\n\n// Simple slug generation (keep as is or use a library)\nconst generateSlug = (text: string): string => {\n    if (!text) return '';\n    return text.toLowerCase().trim().replace(/[^\\w\\s-]/g, '').replace(/\\s+/g, '-').replace(/-+/g, '-');\n};\n\n// Convert number to Roman numeral (basic implementation for lower numbers)\nconst toRoman = (num: number): string => {\n    if (num < 1) return '';\n    const romanMap: { [key: number]: string } = {\n        10: 'X', 9: 'IX', 5: 'V', 4: 'IV', 1: 'I'\n    };\n    let result = '';\n    const sortedKeys = Object.keys(romanMap).map(Number).sort((a, b) => b - a); // Sort keys descending\n\n    for (const key of sortedKeys) {\n        while (num >= key) {\n            result += romanMap[key];\n            num -= key;\n        }\n    }\n    return result;\n};\n\n\ninterface Props {\n    tableOfContents: TableOfContentsItem[];\n    postTitle: string;\n}\n\nconst TOP_LINK_ID = \"post-content-top\";\n\nconst BlogSidebarClient = React.memo(({ tableOfContents = [], postTitle }: Props) => {\n    // Lazy initial state for desktop sidebar\n    const [isDesktopSidebarOpen, setIsDesktopSidebarOpen] = useState(() => {\n        if (typeof window !== 'undefined') {\n            const saved = localStorage.getItem('blogSidebarOpen');\n            return saved !== null ? saved === 'true' : true;\n        }\n        return true;\n    });\n    const [isMobileTocOpen, setIsMobileTocOpen] = useState(false);\n    const [activeHeading, setActiveHeading] = useState<string>(TOP_LINK_ID);\n    const [showBackToTop, setShowBackToTop] = useState(false);\n    const [showNumbering, setShowNumbering] = useState(() => {\n        if (typeof window !== 'undefined') {\n            const saved = localStorage.getItem('blogTocNumbering');\n            return saved !== null ? saved === 'true' : true;\n        }\n        return true;\n    });\n    const sidebarRef = useRef<HTMLElement>(null);\n    const tocListRef = useRef<HTMLUListElement>(null);\n    const mobileOverlayRef = useRef<HTMLDivElement>(null);\n\n    // --- Effects and Callbacks ---\n    const getHeaderOffset = useCallback((): number => { /* ... keep as is ... */\n        let offset = 80;\n        if (typeof window !== 'undefined') {\n            const headerHeightVal = getComputedStyle(document.documentElement).getPropertyValue('--header-height');\n            if (headerHeightVal) { offset = parseInt(headerHeightVal, 10) + 20; }\n        }\n        return offset;\n    }, []);\n    const headingIdsRef = useRef<string[]>([]);\n    useEffect(() => {\n        if (typeof window === 'undefined') return;\n        let ticking = false;\n        const onScroll = () => {\n            if (!ticking) {\n                window.requestAnimationFrame(() => {\n                    setShowBackToTop(window.scrollY > 600);\n                    const pageBottom = document.documentElement.scrollHeight - window.innerHeight;\n                    if (\n                        window.scrollY >= pageBottom - 8 &&\n                        headingIdsRef.current.length > 0\n                    ) {\n                        const lastId = headingIdsRef.current[headingIdsRef.current.length - 1];\n                        setActiveHeading(prev => (prev === lastId ? prev : lastId));\n                    } else if (window.scrollY < 120) {\n                        setActiveHeading(prev => (prev === TOP_LINK_ID ? prev : TOP_LINK_ID));\n                    }\n                    ticking = false;\n                });\n                ticking = true;\n            }\n        };\n        onScroll();\n        window.addEventListener('scroll', onScroll, { passive: true });\n        return () => window.removeEventListener('scroll', onScroll);\n    }, []);\n\n    useEffect(() => {\n        const contentArea = document.querySelector('.blog-post-container');\n        if (!contentArea) return;\n        const headingElements = Array.from(\n            contentArea.querySelectorAll<HTMLElement>('h2[id], h3[id], h4[id]')\n        );\n        const topSentinel = document.getElementById(TOP_LINK_ID);\n\n        if (headingElements.length === 0) {\n            setActiveHeading(TOP_LINK_ID);\n            return;\n        }\n\n        headingIdsRef.current = headingElements.map(el => el.id);\n        const visibleMap = new Map<string, number>();\n\n        const observer = new IntersectionObserver(\n            (entries) => {\n                entries.forEach(entry => {\n                    const target = entry.target as HTMLElement;\n                    const id = target.id;\n                    if (!id) return;\n\n                    if (entry.isIntersecting) {\n                        visibleMap.set(id, target.offsetTop);\n                    } else {\n                        visibleMap.delete(id);\n                    }\n                });\n\n                if (visibleMap.size > 0) {\n                    const nextId = Array.from(visibleMap.entries())\n                        .sort((a, b) => a[1] - b[1])[0][0];\n                    setActiveHeading(prev => (prev === nextId ? prev : nextId));\n                }\n            },\n            {\n                root: null,\n                rootMargin: '-45% 0px -45% 0px',\n                threshold: [0, 0.1, 0.5]\n            }\n        );\n\n        headingElements.forEach(element => observer.observe(element));\n        if (topSentinel) {\n            observer.observe(topSentinel);\n        }\n\n        return () => {\n            headingElements.forEach(element => observer.unobserve(element));\n            if (topSentinel) {\n                observer.unobserve(topSentinel);\n            }\n            observer.disconnect();\n        };\n    }, [tableOfContents]);\n\n    const toggleDesktopSidebar = useCallback(() => {\n        setIsDesktopSidebarOpen(prev => {\n            const newState = !prev;\n            if (typeof window !== 'undefined') {\n                localStorage.setItem('blogSidebarOpen', String(newState));\n            }\n            return newState;\n        });\n    }, []);\n    const toggleMobileToc = useCallback(() => { /* ... keep as is ... */\n        setIsMobileTocOpen(prev => {\n            const nextState = !prev;\n            if (typeof document !== 'undefined') { document.body.style.overflow = nextState ? 'hidden' : ''; }\n            return nextState;\n        });\n      }, []);\n    useEffect(() => { /* ... desktop sidebar class toggle effect ... */\n        const layoutContainer = document.querySelector('.blog-layout-container');\n        const sidebarElement = sidebarRef.current;\n        if (layoutContainer) { layoutContainer.classList.toggle('desktop-sidebar-closed', !isDesktopSidebarOpen); }\n        if (sidebarElement) { sidebarElement.classList.toggle('closed', !isDesktopSidebarOpen); }\n      }, [isDesktopSidebarOpen]);\n    useEffect(() => { /* ... mobile body scroll cleanup effect ... */\n        return () => { if (typeof document !== 'undefined') { document.body.style.overflow = ''; } };\n      }, []);\n    const scrollToTop = useCallback(() => { /* ... keep as is ... */\n        window.scrollTo({ top: 0, behavior: 'smooth' });\n        setActiveHeading(TOP_LINK_ID);\n        setIsMobileTocOpen(false);\n      }, []);\n    const scrollToElement = useCallback((slug: string) => { /* ... keep as is ... */\n        if (slug === TOP_LINK_ID) { scrollToTop(); return; }\n        const element = document.getElementById(slug);\n        if (element) {\n            const offset = getHeaderOffset();\n            const elementTop = element.getBoundingClientRect().top + window.scrollY;\n            const scrollToPosition = elementTop - offset;\n            window.scrollTo({ top: scrollToPosition, behavior: 'smooth' });\n            setActiveHeading(slug);\n            setIsMobileTocOpen(false);\n        } else { console.warn(`Element with ID \"${slug}\" not found.`); }\n      }, [getHeaderOffset, scrollToTop]);\n    const handleTocClick = useCallback((e: React.MouseEvent<HTMLAnchorElement>, slug: string) => { /* ... keep as is ... */ e.preventDefault(); scrollToElement(slug); }, [scrollToElement]);\n    const findActiveIndex = useCallback(() => { /* ... keep as is ... */\n        if (activeHeading === TOP_LINK_ID) return -1;\n        // Find index in the list *excluding* level 1 headings\n        return tableOfContents.filter(h => h.level !== 1).findIndex(h => (h.slug || generateSlug(h.text)) === activeHeading);\n      }, [activeHeading, tableOfContents]);\n    const navigateSection = useCallback((direction: 'next' | 'prev') => { /* ... Adjusted logic uses filtered list ... */\n        const filteredToc = tableOfContents.filter(h => h.level !== 1); // Filter out level 1\n        const currentIndex = findActiveIndex(); // Index within filtered list\n        let nextIndex = -1;\n\n        if (direction === 'next') {\n            nextIndex = (currentIndex === -1) ? 0 : currentIndex + 1;\n            if (nextIndex >= filteredToc.length) { nextIndex = filteredToc.length - 1; } // Stay on last item\n        } else { // 'prev'\n            if (currentIndex === 0) { scrollToTop(); return; } // Go to Top if at the first item\n            else if (currentIndex > 0) { nextIndex = currentIndex - 1; } // Go to previous item\n            else { return; } // Already at Top or invalid index\n        }\n\n        if (nextIndex >= 0 && nextIndex < filteredToc.length) {\n            const nextHeading = filteredToc[nextIndex];\n            if (nextHeading) { const slug = nextHeading.slug || generateSlug(nextHeading.text); if (slug) scrollToElement(slug); }\n        }\n      }, [findActiveIndex, tableOfContents, scrollToElement, scrollToTop]);\n    useEffect(() => { /* ... scroll active TOC item into view effect ... */\n        if (activeHeading && tocListRef.current) {\n            const activeElement = tocListRef.current.querySelector(`a[href=\"#${activeHeading}\"]`) as HTMLElement;\n            if (activeElement) {\n                const tocRect = tocListRef.current.getBoundingClientRect();\n                const elemRect = activeElement.getBoundingClientRect();\n                if (elemRect.top < tocRect.top || elemRect.bottom > tocRect.bottom) {\n                    activeElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n                }\n            }\n        }\n      }, [activeHeading]);\n    const toggleNumbering = useCallback(() => {\n        setShowNumbering(prev => {\n            const newState = !prev;\n            if (typeof window !== 'undefined') {\n                localStorage.setItem('blogTocNumbering', String(newState));\n            }\n            return newState;\n        });\n    }, []);\n\n\n    // Memoize filtered TOC to avoid recalculation\n    const filteredToc = React.useMemo(\n        () => tableOfContents.filter(heading => heading.level !== 1),\n        [tableOfContents]\n    );\n\n    const minLevel = React.useMemo(\n        () => filteredToc.length > 0 ? Math.min(...filteredToc.map(h => h.level)) : 2,\n        [filteredToc]\n    );\n\n    const renderTocList = React.useCallback(() => {\n\n        return (\n            // Add .numbered class dynamically based on showNumbering state\n            <ul className={`toc-list ${showNumbering ? 'numbered' : ''}`} ref={tocListRef}>\n                {/* Static \"Top\" Link */}\n                <li key=\"top\" className={`toc-item level-1 top-link ${activeHeading === TOP_LINK_ID ? 'active' : ''}`}>\n                    <a href={`#${TOP_LINK_ID}`} className={`toc-link top-link ${activeHeading === TOP_LINK_ID ? 'active' : ''}`} onClick={(e) => handleTocClick(e, TOP_LINK_ID)} aria-current={activeHeading === TOP_LINK_ID ? 'location' : undefined}>\n                        <Home size={16} className=\"toc-link-icon\" aria-hidden=\"true\"/>\n                        <span>{postTitle || 'Introduction'}</span>\n                    </a>\n                </li>\n\n                {/* Dynamic Heading Links */}\n                {filteredToc.map((heading) => {\n                    const slug = heading.slug || generateSlug(heading.text);\n                    if (!slug) return null;\n                    const isActive = activeHeading === slug;\n                    // *** FIX: Calculate the RELATIVE level for CSS class assignment ***\n                    const relativeLevel = heading.level - minLevel + 1;\n\n                    return (\n                        <li\n                            key={slug}\n                            // *** FIX: Use relativeLevel for the class name ***\n                            className={`toc-item level-${relativeLevel} ${isActive ? 'active' : ''}`}\n                            // Indentation still uses the difference from the minimum displayed level\n                            style={{ '--level-indent': `${(heading.level - minLevel) * 18}px` } as React.CSSProperties}\n                        >\n                            <a href={`#${slug}`} className={`toc-link ${isActive ? 'active' : ''}`} onClick={(e) => handleTocClick(e, slug)} aria-current={isActive ? 'location' : undefined}>\n                                {/* Numbering is now purely handled by CSS ::before pseudo-element based on the level-* class */}\n                                <span>{heading.text}</span>\n                            </a>\n                        </li>\n                    );\n                })}\n            </ul>\n        );\n    }, [activeHeading, filteredToc, handleTocClick, minLevel, postTitle, showNumbering]);\n\n    // --- JSX Structure (Mostly Unchanged) ---\n    return (\n        <>\n            {/* --- Desktop Sidebar --- */}\n            <aside ref={sidebarRef} id=\"blog-sidebar\" className={`blog-sidebar mobile-hidden ${isDesktopSidebarOpen ? '' : 'closed'}`} aria-label=\"Article Index\">\n                <div className=\"sidebar-header\"> {/* ... toggle button ... */}\n                    <button type=\"button\" className=\"sidebar-toggle-button\" onClick={toggleDesktopSidebar} aria-label={isDesktopSidebarOpen ? 'Collapse Index' : 'Expand Index'} aria-expanded={isDesktopSidebarOpen} aria-controls=\"blog-sidebar\" title={isDesktopSidebarOpen ? 'Collapse' : 'Expand'} >\n                        <ChevronsLeft className=\"close-icon\"/> <ChevronsRight className=\"open-icon\"/>\n                    </button>\n                </div>\n                <div className=\"sidebar-content\">\n                    <div className=\"toc-navigation\"> {/* ... prev/next buttons ... */}\n                        <button onClick={() => navigateSection('prev')} aria-label=\"Previous Section\" title=\"Previous Section\"><IconPageTurnPrev /></button>\n                        <span className=\"toc-nav-label\">Section</span>\n                        <button onClick={() => navigateSection('next')} aria-label=\"Next Section\" title=\"Next Section\"><IconPageTurnNext /></button>\n                    </div>\n                    {/* Render the updated TOC list */}\n                    {tableOfContents.length > 0 ? (\n                        <nav aria-label=\"Article Sections\">{renderTocList()}</nav>\n                    ) : (\n                        <nav aria-label=\"Article Sections\">\n                            {renderTocList()} {/* Will render only the Top link */}\n                            <p className=\"toc-empty\">No sections found.</p>\n                        </nav>\n                     )}\n                </div>\n                <div className=\"sidebar-footer\"> {/* ... footer buttons ... */}\n                    <button onClick={scrollToTop} className=\"sidebar-footer-link\" title=\"Scroll to Top\"><IconOrnateUpArrow width={16} height={16} aria-hidden=\"true\"/><span>Scroll to Top</span></button>\n                    <button onClick={toggleNumbering} className=\"sidebar-footer-link numbering-toggle-btn\" aria-pressed={showNumbering} title={showNumbering ? \"Hide Section Numbers\" : \"Show Section Numbers\"}><Hash size={16} aria-hidden=\"true\"/><span>{showNumbering ? \"Hide Numbers\" : \"Show Numbers\"}</span></button>\n                    <Link href=\"/blog\" className=\"sidebar-footer-link\" title=\"Return to Blog Index\"><IconOrnateList width={16} height={16} aria-hidden=\"true\"/><span>All Entries</span></Link>\n                </div>\n            </aside>\n\n            {/* --- Mobile TOC Toggle --- */}\n            {tableOfContents.length > 0 && ( // Show if there are any sections at all\n                <button type=\"button\" className=\"mobile-toc-toggle-button\" onClick={toggleMobileToc} aria-label=\"Open Table of Contents\" aria-expanded={isMobileTocOpen} aria-controls=\"mobile-toc-overlay\">\n                    <BookOpen size={22} />\n                </button>\n            )}\n\n            {/* --- Mobile TOC Overlay --- */}\n            <div ref={mobileOverlayRef} id=\"mobile-toc-overlay\" className={`mobile-toc-overlay ${isMobileTocOpen ? 'visible' : ''}`} role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"mobile-toc-title\" {...(!isMobileTocOpen ? { inert: \"true\" } : {})}>\n                <div className=\"mobile-toc-header\"> {/* ... title and close button ... */}\n                    <h2 id=\"mobile-toc-title\" className=\"mobile-toc-title\">Sections</h2>\n                    <button onClick={toggleMobileToc} className=\"mobile-toc-close\" aria-label=\"Close Table of Contents\"><X size={24} /></button>\n                </div>\n                <div className=\"mobile-toc-content\">\n                    <div className=\"toc-navigation mobile-toc-navigation\"> {/* ... mobile prev/next ... */}\n                        <button onClick={() => navigateSection('prev')} aria-label=\"Previous Section\" title=\"Previous Section\"><IconPageTurnPrev /></button>\n                        <span className=\"toc-nav-label\">Section</span>\n                        <button onClick={() => navigateSection('next')} aria-label=\"Next Section\" title=\"Next Section\"><IconPageTurnNext /></button>\n                        {/* Add collapse button to mobile TOC navigation */}\n                        <button onClick={toggleMobileToc} className=\"mobile-toc-nav-collapse\" aria-label=\"Close Table of Contents\" title=\"Close TOC\">\n                            <X size={16} />\n                        </button>\n                    </div>\n                    {/* Render the updated TOC list */}\n                    <nav aria-label=\"Article Sections Mobile\">{renderTocList()}</nav>\n                    <div className=\"mobile-toc-footer\"> {/* ... mobile numbering toggle ... */}\n                        <button onClick={toggleNumbering} className=\"sidebar-footer-link numbering-toggle-btn\" aria-pressed={showNumbering} title={showNumbering ? \"Hide Section Numbers\" : \"Show Section Numbers\"}><Hash size={16} aria-hidden=\"true\"/><span>{showNumbering ? \"Hide Numbers\" : \"Show Numbers\"}</span></button>\n                    </div>\n                </div>\n            </div>\n\n            <ScrollToTop type='blog' scrollToTop={scrollToTop} showBackToTop={showBackToTop}/>\n            {/* --- Back to Top Button --- */}\n\n        </>\n    );\n});\n\nBlogSidebarClient.displayName = 'BlogSidebarClient';\nexport default BlogSidebarClient;\n","// src/app/blog/[category]/[slug]/BlogPageClient.tsx\n\"use client\"; // <<< This directive MUST be the very first line\n\nimport React, { useState, useEffect } from 'react';\n// Make sure the import path for your Icons component is correct\nimport { IconReadingMode } from '@/components/Icons';\n\n// Props interface clarifies that it expects children\ninterface BlogPageClientProps {\n    children: React.ReactNode;\n}\n\n// Export the component as default\nexport default function BlogPageClient({ children }: BlogPageClientProps) {\n    // State for toggling reading mode\n    const [isReadingMode, setIsReadingMode] = useState(false);\n\n    // Function to toggle reading mode and save preference\n    const toggleReadingMode = () => {\n        setIsReadingMode(prev => {\n            const newState = !prev;\n            // Save preference to localStorage client-side\n            try {\n                // Use localStorage safely, only works in the browser\n                localStorage.setItem('readingModePref', JSON.stringify(newState));\n            } catch (error) {\n                // Handle potential errors (e.g., localStorage disabled)\n                console.warn(\"Could not save reading mode preference:\", error);\n            }\n            return newState;\n        });\n    };\n\n    // Effect to load preference from localStorage when component mounts (client-side)\n    useEffect(() => {\n        try {\n            const savedPref = localStorage.getItem('readingModePref');\n            if (savedPref !== null) {\n                // Parse the saved value back to a boolean\n                setIsReadingMode(JSON.parse(savedPref));\n            }\n        } catch (error) {\n            console.warn(\"Could not load reading mode preference:\", error);\n            // Optionally set a default if loading fails\n            // setIsReadingMode(false);\n        }\n        // Empty dependency array ensures this runs only once after initial mount\n    }, []);\n\n\n    return (\n        // This div wraps the main content and applies the reading-mode class dynamically\n        <div className={`blog-page-wrapper ${isReadingMode ? 'reading-mode' : ''}`}>\n            {/* The button to toggle reading mode */}\n            <button\n                onClick={toggleReadingMode}\n                className=\"reading-mode-toggle\"\n                title={isReadingMode ? \"Exit Reading Mode\" : \"Enter Reading Mode\"}\n                aria-pressed={isReadingMode} // Indicates the toggle state for accessibility\n            >\n                {/* Reading mode icon */}\n                <IconReadingMode aria-hidden=\"true\"/>\n                {/* Screen reader text for accessibility */}\n                <span className=\"sr-only\">{isReadingMode ? \"Exit Reading Mode\" : \"Enter Reading Mode\"}</span>\n            </button>\n            {/* Render the actual page content passed down from the Server Component */}\n            {children}\n        </div>\n    );\n}","'use client';\n\nimport { DiscussionEmbed } from \"disqus-react\";\nimport { useTheme } from \"@/context/ThemeContext\";\nimport { useEffect, useRef, useState } from \"react\";\n\ninterface DisqusCommentsProps {\n  postTitle: string;\n  postUrl: string;\n  postIdentifier: string;\n  className?: string;\n}\n\nexport default function DisqusComments({\n  postTitle,\n  postUrl,\n  postIdentifier,\n  className = '',\n}: DisqusCommentsProps) {\n  const { isDarkMode, mounted } = useTheme();\n  const disqusRef = useRef<HTMLDivElement>(null);\n  const [disqusLoaded, setDisqusLoaded] = useState(false);\n  const [initialThemeDetected, setInitialThemeDetected] = useState(false);\n  \n  // Get the full URL for Disqus\n  const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://manic.agency';\n  const fullUrl = `${siteUrl}${postUrl}`;\n  \n  // Detect initial theme from DOM before loading Disqus\n  useEffect(() => {\n    if (mounted) {\n      // Theme context is ready, we can proceed\n      setInitialThemeDetected(true);\n    }\n  }, [mounted]);\n  \n  // Set theme attributes and handle theme changes\n  useEffect(() => {\n    if (disqusRef.current && initialThemeDetected) {\n      disqusRef.current.setAttribute('data-disqus-theme', isDarkMode ? 'dark' : 'light');\n      \n      // Reset Disqus when theme changes to apply new styling\n      if (disqusLoaded && 'DISQUS' in window) {\n        try {\n          // @ts-ignore - DISQUS is added to window by the Disqus script\n          window.DISQUS.reset({\n            reload: true,\n            config: function () {\n              this.page.identifier = postIdentifier;\n              this.page.url = fullUrl;\n              this.page.title = postTitle;\n            }\n          });\n        } catch (err) {\n          console.warn(\"Error resetting Disqus:\", err);\n        }\n      }\n    }\n  }, [isDarkMode, postIdentifier, fullUrl, postTitle, disqusLoaded, initialThemeDetected]);\n  \n  // Track when Disqus is loaded\n  useEffect(() => {\n    if (!initialThemeDetected) return;\n    \n    const checkDisqusLoaded = () => {\n      if (document.getElementById('disqus_thread')?.innerHTML.trim()) {\n        setDisqusLoaded(true);\n      }\n    };\n    \n    const timer = setTimeout(checkDisqusLoaded, 1000);\n    const observer = new MutationObserver(checkDisqusLoaded);\n    \n    if (disqusRef.current) {\n      observer.observe(disqusRef.current, { childList: true, subtree: true });\n    }\n    \n    return () => {\n      clearTimeout(timer);\n      observer.disconnect();\n    };\n  }, [initialThemeDetected]);\n  \n  // Don't render Disqus until theme is properly detected\n  if (!mounted || !initialThemeDetected) {\n    return (\n      <div className={`disqus-comments-container ${className} loading`}>\n        <div className=\"disqus-header\">\n          <h3 className=\"disqus-title\">Comments from Disqus</h3>\n          <div className=\"disqus-divider\"></div>\n        </div>\n        <div className=\"disqus-loading\">\n          <p>Loading comments...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div \n      ref={disqusRef}\n      className={`disqus-comments-container ${className} ${isDarkMode ? 'dark' : 'light'}`}\n      data-theme={isDarkMode ? 'dark' : 'light'}\n    >\n      <div className=\"disqus-header\">\n        <h3 className=\"disqus-title\">Comments from Disqus</h3>\n        <div className=\"disqus-divider\"></div>\n      </div>\n      \n      <DiscussionEmbed\n        shortname=\"www-manic-agency\"\n        config={{\n          url: fullUrl,\n          identifier: postIdentifier,\n          title: postTitle,\n          language: 'en'\n        }}\n      />\n      \n      {/* Custom styles for Disqus */}\n      <style jsx>{`\n        .disqus-comments-container {\n          margin-top: 2rem;\n          margin-bottom: 2rem;\n          padding: 1.5rem;\n          border-radius: 0.5rem;\n          background-color: var(--bg-secondary);\n          border: 1px solid var(--border-primary);\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n          transition: all 0.3s ease;\n        }\n        \n        .disqus-comments-container:hover {\n          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);\n          border-color: var(--accent-primary);\n        }\n        \n        .disqus-header {\n          display: flex;\n          align-items: center;\n          margin-bottom: 1.5rem;\n        }\n        \n        .disqus-title {\n          font-size: 1.25rem;\n          margin: 0;\n          color: var(--text-primary);\n          font-family: var(--font-display);\n          position: relative;\n        }\n        \n        .disqus-title::before {\n          content: \"\";\n          position: absolute;\n          width: 3px;\n          height: 100%;\n          background: var(--accent-primary);\n          left: -10px;\n          border-radius: 3px;\n        }\n        \n        .disqus-divider {\n          flex-grow: 1;\n          height: 1px;\n          background: linear-gradient(\n            90deg,\n            var(--accent-primary) 0%,\n            var(--accent-secondary) 100%\n          );\n          margin-left: 1rem;\n          opacity: 0.6;\n        }\n      `}</style>\n      \n      {/* Clean container styling */}\n      <style jsx global>{`\n        /* Clean container that respects your theme */\n        #disqus_thread {\n          background-color: ${isDarkMode ? 'var(--bg-secondary)' : 'var(--bg-blog-paper)'} !important;\n          border-radius: var(--radius-lg);\n          padding: 1rem;\n          min-height: 200px;\n          position: relative;\n          transition: background-color 0.3s ease;\n          border: 1px solid ${isDarkMode ? 'rgba(var(--accent-primary-rgb), 0.2)' : 'rgba(var(--text-muted-rgb), 0.1)'};\n        }\n        \n        /* Loading state styling */\n        .disqus-loading {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          min-height: 200px;\n          color: var(--text-muted);\n          font-family: var(--font-meta-blog);\n          font-size: 0.9rem;\n        }\n        \n        #disqus_thread:empty::after {\n          content: \"Loading Disqus comments...\";\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          color: var(--text-muted);\n          font-family: var(--font-meta-blog);\n          font-size: 0.9rem;\n          text-align: center;\n        }\n        \n\n      `}</style>\n    </div>\n  );\n}","// src/components/GiscusComments.tsx\n'use client';\n\nimport React, { useState, useEffect } from 'react'; // Import useState, useEffect\nimport Giscus from '@giscus/react';\nimport { GISCUS_CONFIG } from '@/lib/constants';\nimport { useTheme } from '@/context/ThemeContext'; // <--- Make sure this path is correct\n\nexport default function GiscusComments() {\n    // --- CORRECTED: Destructure isDarkMode ---\n    const { isDarkMode } = useTheme(); // Get boolean theme state\n\n    // State to hold the theme string for Giscus ('light', 'dark', 'transparent_dark', etc.)\n    // Initialize with a sensible default based on your site's non-JS/initial state\n    const [giscusTheme, setGiscusTheme] = useState('transparent_dark'); // Defaulting to dark\n\n    // This effect runs on the client after mount and when isDarkMode changes\n    useEffect(() => {\n        // --- CORRECTED: Use isDarkMode to determine the theme string ---\n        const currentGiscusTheme = isDarkMode ? 'transparent_dark' : 'light'; // Or use 'dark'\n        setGiscusTheme(currentGiscusTheme);\n\n        // console.log(`GiscusComments: isDarkMode=${isDarkMode}, setting Giscus theme to '${currentGiscusTheme}'`); // For debugging\n\n    }, [isDarkMode]); // --- CORRECTED: Dependency array uses isDarkMode ---\n\n\n    // Configuration check (keep your existing logic)\n    if (!GISCUS_CONFIG.REPO || !GISCUS_CONFIG.REPO_ID || !GISCUS_CONFIG.CATEGORY || !GISCUS_CONFIG.CATEGORY_ID) {\n         console.error(\"Giscus constants configuration values are missing.\");\n         return <p>Error loading comments: Configuration missing.</p>;\n     }\n\n    // Reminder: The postMessage logic MUST ALSO be updated in your theme toggling function\n    // to use the isDarkMode boolean correctly when sending the message.\n\n    return (\n        <div className=\"giscus-container mt-12 pt-8 border-t border-dashed border-bg-tertiary\">\n            {/* Optional: Add a title styled by your theme */}\n            {/* <h3 className=\"text-2xl font-heading-blog mb-6\">Comments</h3> */}\n            <Giscus\n                id=\"comments\"\n                repo={GISCUS_CONFIG.REPO}\n                repoId={GISCUS_CONFIG.REPO_ID}\n                category={GISCUS_CONFIG.CATEGORY}\n                categoryId={GISCUS_CONFIG.CATEGORY_ID}\n                mapping={GISCUS_CONFIG.MAPPING}\n                strict={GISCUS_CONFIG.STRICT}\n                reactionsEnabled={GISCUS_CONFIG.REACTIONS}\n                emitMetadata={GISCUS_CONFIG.EMIT_METADATA}\n                inputPosition={GISCUS_CONFIG.INPUT_POSITION}\n                // --- Use the dynamic state variable (no change here) ---\n                theme={giscusTheme}\n                // --- ------------------------------------------------ ---\n                lang={GISCUS_CONFIG.LANG}\n                loading={GISCUS_CONFIG.LOADING}\n            />\n        </div>\n    );\n}","// src/components/ResponsiveImage.tsx\nimport Image from 'next/image';\n\ninterface ResponsiveImageProps {\n  src: string;\n  alt: string;\n  width?: number;\n  height?: number;\n  priority?: boolean;\n  className?: string;\n  sizes?: string;\n}\n\n/**\n * Responsive image component with optimized srcset\n * Automatically generates WebP versions and proper sizes\n */\nexport default function ResponsiveImage({\n  src,\n  alt,\n  width = 1200,\n  height = 630,\n  priority = false,\n  className = '',\n  sizes = '(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw',\n}: ResponsiveImageProps) {\n  return (\n    <Image\n      src={src}\n      alt={alt}\n      width={width}\n      height={height}\n      priority={priority}\n      className={className}\n      sizes={sizes}\n      quality={85}\n      loading={priority ? 'eager' : 'lazy'}\n      placeholder=\"blur\"\n      blurDataURL=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNmNWY1ZjUiLz48L3N2Zz4=\"\n    />\n  );\n}\n\n","// src/components/CustomMarkdownRenderer.tsx\n// Renderer for the main Blog section, featuring ornate styles and custom syntax.\n// V4 - Improved Formatting & Comments, includes fixes for TS errors.\n\n'use client';\n\n// --- Core React/Next Imports ---\nimport React, {\n    ReactNode,\n    useMemo,\n    isValidElement,\n    ComponentPropsWithoutRef,\n    CSSProperties,\n    Children,\n    useState,\n    useEffect,\n    useRef\n} from 'react';\n\n// --- Markdown Processing Libraries ---\nimport ReactMarkdown from 'react-markdown';              // Renders Markdown as React components\nimport remarkMath from 'remark-math';                    // Parses $math$ and $$math$$ syntax\nimport rehypeKatex from 'rehype-katex';                  // Renders math using KaTeX\nimport rehypeSlug from 'rehype-slug';                    // Adds `id` slugs to headings\nimport rehypeAutolinkHeadings from 'rehype-autolink-headings'; // Adds links to headings\nimport remarkGfm from 'remark-gfm';                      // Adds support for GitHub Flavored Markdown (tables, etc.)\nimport remarkUnwrapImages from 'remark-unwrap-images';     // Removes <p> tags around images\nimport rehypeRaw from 'rehype-raw';                      // Allows raw HTML in Markdown (necessary for <mark>, etc.)\nimport { Components } from 'react-markdown';             // Type definition for component overrides map\nimport type { PluggableList } from 'unified';            // Type for plugin arrays\nimport type { Element, Text, Root, ElementContent } from 'hast'; // Types for Abstract Syntax Tree nodes\nimport { visit } from 'unist-util-visit';                  // AST traversal utility\nimport { SKIP } from 'unist-util-visit';                 // Visit control constants\n\n// --- Theme Context & Custom Components ---\nimport { useTheme } from '@/context/ThemeContext';        // Hook for dark/light mode detection\nimport ResponsiveImage from '@/components/ResponsiveImage';\nimport { AsciiArtPlaceholder } from '@/lib/asciiPlaceholders'; // Fallback image\n\n// --- Icons (Using lucide-react as an example) ---\nimport { Info, AlertTriangle, Lightbulb, Siren, Copy } from 'lucide-react';\n\n// ==================================\n// === Interfaces & Types ===\n// ==================================\n\ninterface CustomReactMarkdownProps {\n    children: string;   // The raw markdown input string\n    className?: string; // Optional additional CSS class\n}\n\n// Base type for props passed to component overrides\ntype ReactMarkdownProps = {\n    node?: Element;    // The HAST node being rendered\n    children?: ReactNode; // Rendered React children\n    [key: string]: any; // Allow other props passed down\n};\n\n// Specific prop types for overriding standard HTML elements\ntype ParagraphProps = ComponentPropsWithoutRef<'p'> & ReactMarkdownProps;\ntype BlockquoteProps = ComponentPropsWithoutRef<'blockquote'> & ReactMarkdownProps;\ntype CodeProps = ComponentPropsWithoutRef<'code'> & ReactMarkdownProps & { inline?: boolean };\ntype DivProps = ComponentPropsWithoutRef<'div'> & ReactMarkdownProps;\ntype HeadingProps = ComponentPropsWithoutRef<'h1'> & ReactMarkdownProps; // Works for h1-h6\ntype ImgProps = Omit<ComponentPropsWithoutRef<'img'>, 'children' | 'node'> & ReactMarkdownProps; // Omit conflicting props\ntype TableProps = ComponentPropsWithoutRef<'table'> & ReactMarkdownProps;\ntype TableCellProps = ComponentPropsWithoutRef<'td'> & ReactMarkdownProps & { isHeader?: boolean };\ntype ListProps = ComponentPropsWithoutRef<'ul'> & ReactMarkdownProps & { ordered?: boolean; depth?: number };\ntype ListItemProps = ComponentPropsWithoutRef<'li'> & ReactMarkdownProps & { checked?: boolean | null; index?: number; ordered?: boolean };\ntype LinkProps = ComponentPropsWithoutRef<'a'> & ReactMarkdownProps;\ntype HrProps = ComponentPropsWithoutRef<'hr'> & ReactMarkdownProps;\ntype MarkProps = ComponentPropsWithoutRef<'mark'> & ReactMarkdownProps;\n\n// Prop types for custom components parsed from markdown or HAST\ninterface ImageGridProps { children: React.ReactNode; columns?: number; }\ninterface BannerProps { children: ReactNode; attributes?: Record<string, string>; }\ninterface CalloutProps { children: React.ReactNode; type: 'note' | 'warning' | 'tip' | 'alert'; }\ninterface CustomQuoteProps { children: React.ReactNode; attribution?: ReactNode; }\n\n// ==================================\n// === Helper Functions ===\n// ==================================\n\n/**\n * Extracts the raw text content from a HAST node or its children recursively.\n */\nconst getNodeText = (node: ElementContent | Root | undefined): string => {\n    if (!node) return '';\n    if (node.type === 'text') return node.value || '';\n    // @ts-ignore Check if node has children (covers Element and Root)\n    if (node.children && Array.isArray(node.children)) {\n        // @ts-ignore Recursively map children and join text\n        return node.children.map(getNodeText).join('');\n    }\n    return '';\n};\n\n/**\n * Parses a string of simple key=value attributes (e.g., {key=\"value\" boolKey}).\n */\nconst parseAttributes = (attrString: string): Record<string, string> => {\n    const attributes: Record<string, string> = {};\n    const regex = /(\\w+)(?:=(?:\"([^\"]*)\"|'([^']*)'|([^}\\s]+)))?/g;\n    let match;\n    while ((match = regex.exec(attrString)) !== null) {\n        const key = match[1];\n        const value = match[2] ?? match[3] ?? match[4] ?? 'true'; // Default boolean keys to 'true'\n        attributes[key] = value;\n    }\n    return attributes;\n};\n\n// ==================================\n// === Helper Components ===\n// ==================================\n\n/** Renders an image grid layout. */\nconst ImageGrid: React.FC<ImageGridProps> = ({ children, columns = 2 }) => {\n    return (\n        <div className=\"image-grid\" style={{ gridTemplateColumns: `repeat(${columns}, 1fr)` }}>\n            {children}\n        </div>\n    );\n};\n\n/** Renders a banner element with customizable attributes. */\nconst Banner: React.FC<BannerProps> = ({ children, attributes = {} }) => {\n    const style: CSSProperties = {\n        backgroundColor: attributes.backgroundColor || 'var(--accent-primary)',\n        color: attributes.textColor || 'var(--text-on-accent)',\n        textAlign: attributes.alignment as any || 'center',\n        padding: attributes.size === 'large' ? '2rem' : attributes.size === 'small' ? '0.5rem' : '1rem',\n    };\n    const icon = attributes.icon;\n    return (\n        <div className={`banner align-${style.textAlign}`} style={style}>\n            {icon && <span className=\"banner-icon\" style={{ marginRight: '0.75rem' }}>{icon}</span>}\n            {children}\n        </div>\n    );\n};\n\n/** Renders a callout box (note, warning, tip, alert). */\nconst Callout: React.FC<CalloutProps> = ({ type, children }) => {\n    const Icon = { note: Info, warning: AlertTriangle, tip: Lightbulb, alert: Siren }[type] || Info;\n    const title = type.charAt(0).toUpperCase() + type.slice(1);\n    return (\n        <div className={`callout callout-${type}`}>\n            <div className=\"callout-title\">\n                <Icon className=\"callout-icon\" size={20} />\n                {title}\n            </div>\n            <div className=\"callout-content\">{children}</div>\n        </div>\n    );\n};\n\n/** Renders an ornate styled quote with optional attribution. */\nconst CustomQuote: React.FC<CustomQuoteProps> = ({ children, attribution }) => {\n    return (\n        <blockquote className=\"styled-quote\">\n            <div className=\"quote-content\">{children}</div>\n            {attribution && (<footer className=\"quote-attribution\">{attribution}</footer>)}\n        </blockquote>\n    );\n};\n\n// ==================================\n// === Syntax Highlighter Helpers ===\n// ==================================\n\ntype PrismComponent = typeof import('react-syntax-highlighter')['Prism'] | null;\ntype PrismStyle = Record<string, any> | null;\n\nconst useLazySyntaxHighlighter = (shouldLoad: boolean, isDarkMode: boolean) => {\n    const [highlighter, setHighlighter] = useState<PrismComponent>(null);\n    const [style, setStyle] = useState<PrismStyle>(null);\n\n    useEffect(() => {\n        if (!shouldLoad || (highlighter && style)) return;\n\n        let cancelled = false;\n\n        const load = async () => {\n            try {\n                const [{ Prism }, themeModule] = await Promise.all([\n                    import('react-syntax-highlighter'),\n                    import('react-syntax-highlighter/dist/esm/styles/prism')\n                ]);\n\n                if (!cancelled) {\n                    setHighlighter(() => Prism);\n                    setStyle(isDarkMode ? themeModule.coldarkDark : themeModule.prism);\n                }\n            } catch (error) {\n                console.error('Failed to load syntax highlighter', error);\n            }\n        };\n\n        load();\n\n        return () => {\n            cancelled = true;\n        };\n    }, [shouldLoad, isDarkMode, highlighter, style]);\n\n    return { highlighter, style };\n};\n\n\n\n// ==================================\n// === Main Renderer Component ===\n// ==================================\nexport function CustomMarkdownRenderer({ children: rawMarkdown, className = \"\" }: CustomReactMarkdownProps) {\n    const { isDarkMode } = useTheme();\n\n    // --- HAST Tree Preprocessing Plugin ---\n    // Modifies the Markdown Abstract Syntax Tree before rendering\n    const rehypeProcessCustomSyntax: PluggableList[number] = () => {\n        return (tree: Root) => {\n            let collectingBanner = false;\n            let bannerNode: Element | null = null;\n            let bannerContent: string[] = [];\n            let collectingCallout = false;\n            let calloutNode: Element | null = null;\n            let calloutContent: string[] = [];\n\n            visit(tree, 'element', (node: Element, index, parent) => {\n\n                // Transform :::banner paragraphs into divs with data attributes\n                if (node.tagName === 'p') {\n                    const textContent = getNodeText(node).trim();\n                    \n                    // Check for single-line banner with closing :::\n                    const singleLineBannerMatch = textContent.match(/^:::banner\\s*(?:\\{([^}]*)\\})?\\s*(.*?)\\s*:::$/);\n                    if (singleLineBannerMatch) {\n                        const [, attrString = '', bannerText] = singleLineBannerMatch;\n                        const attributes = parseAttributes(attrString);\n                        \n                        // Transform this node to banner\n                        node.tagName = 'div';\n                        node.properties = {\n                            ...node.properties,\n                            'data-custom-component': 'banner',\n                            'data-banner-attrs': JSON.stringify(attributes),\n                        };\n                        node.children = [{ type: 'text', value: bannerText.trim() }];\n                        return;\n                    }\n                    \n                    // Check for multiline banner start (:::banner{...} or just :::banner)\n                    const bannerStartMatch = textContent.match(/^:::banner\\s*(?:\\{([^}]*)\\})?(.*)$/);\n                    if (bannerStartMatch) {\n                        const [, attrString = '', remainingText] = bannerStartMatch;\n                        const attributes = parseAttributes(attrString);\n                        \n                        // Start collecting banner content\n                        collectingBanner = true;\n                        bannerContent = [];\n                        \n                        // Check if there's content on the same line\n                        if (remainingText.trim()) {\n                            bannerContent.push(remainingText.trim());\n                        }\n                        \n                        // Transform this node to banner\n                        node.tagName = 'div';\n                        node.properties = {\n                            ...node.properties,\n                            'data-custom-component': 'banner',\n                            'data-banner-attrs': JSON.stringify(attributes),\n                        };\n                        bannerNode = node;\n                        return;\n                    }\n                    \n                    // Check for banner end (standalone :::)\n                    if (textContent === ':::' && collectingBanner) {\n                        // End banner collection\n                        collectingBanner = false;\n                        if (bannerNode) {\n                            (bannerNode as any).children = [{ type: 'text', value: bannerContent.join(' ') }];\n                        }\n                        // Mark this node for removal\n                        node.properties = { 'data-remove': 'true' };\n                        return;\n                    }\n                    \n                    // If we're collecting banner content, add this text\n                    if (collectingBanner) {\n                        bannerContent.push(textContent);\n                        // Mark this node for removal\n                        node.properties = { 'data-remove': 'true' };\n                        return;\n                    }\n                    \n                    // If we're collecting callout content, add this text\n                    if (collectingCallout) {\n                        calloutContent.push(textContent);\n                        // Mark this node for removal\n                        node.properties = { 'data-remove': 'true' };\n                        return;\n                    }\n                    \n                    // Check for standalone callouts (:::alert, :::tip, etc.)\n                    const calloutMatch = textContent.match(/^:::(note|warning|tip|alert)\\s*(.*)$/);\n                    if (calloutMatch) {\n                        const [, type, content] = calloutMatch;\n                        \n                        // Check if this is a single-line callout with content\n                        if (content.trim()) {\n                            // Single-line callout - transform immediately\n                            node.tagName = 'div';\n                            node.properties = {\n                                'data-custom-component': 'callout',\n                                'data-callout-type': type,\n                                className: ['callout', `callout-${type}`]\n                            };\n                            node.children = [{ type: 'text', value: content.trim() }];\n                            return;\n                        } else {\n                            // Multi-line callout - start collecting\n                            collectingCallout = true;\n                            calloutContent = [];\n                            \n                            // Transform this node to callout\n                            node.tagName = 'div';\n                            node.properties = {\n                                'data-custom-component': 'callout',\n                                'data-callout-type': type,\n                                className: ['callout', `callout-${type}`]\n                            };\n                            calloutNode = node;\n                            // Clear the marker text\n                            node.children = [];\n                            return;\n                        }\n                    }\n                    \n                    // Check for empty line (end of callout content)\n                    if (textContent === '' && collectingCallout) {\n                        // End callout collection\n                        collectingCallout = false;\n                        if (calloutNode) {\n                            (calloutNode as any).children = [{ type: 'text', value: calloutContent.join(' ') }];\n                        }\n                        // Mark this node for removal\n                        node.properties = { 'data-remove': 'true' };\n                        return;\n                    }\n                }\n\n                // Transform :::callout blockquotes into divs with data attributes\n                if (node.tagName === 'blockquote') {\n                    const firstChild = node.children?.[0];\n                    if (firstChild?.type === 'element' && firstChild.tagName === 'p') {\n                        const textContent = getNodeText(firstChild).trim();\n                        const calloutMatch = textContent.match(/^:::(note|warning|tip|alert)\\s*$/);\n                        if (calloutMatch) {\n                            const type = calloutMatch[1] as CalloutProps['type'];\n                            node.tagName = 'div';\n                            node.properties = {\n                                'data-custom-component': 'callout',\n                                'data-callout-type': type,\n                                className: ['callout', `callout-${type}`]\n                            };\n                            node.children = node.children.slice(1); // Remove the marker paragraph\n                            return; // Stop further processing for this node\n                        }\n                    }\n                }\n                 // Add ImageGrid parsing if needed (e.g., :::grid{cols=3})\n                 if (node.tagName === 'p') {\n                     const textContent = getNodeText(node).trim();\n                     const gridMatch = textContent.match(/^:::grid\\s*(?:\\{columns?=(\\d+)\\})?\\s*$/);\n                     if (gridMatch) {\n                         const columns = gridMatch[1] ? parseInt(gridMatch[1], 10) : 2;\n                         node.tagName = 'div';\n                         node.properties = {\n                             'data-custom-component': 'image-grid',\n                             'data-columns': String(columns),\n                             className: ['image-grid']\n                         };\n                         node.children = []; // Clear the marker text\n                         return;\n                     }\n                 }\n            });\n            \n            // Final cleanup: if we're still collecting content at the end, finalize it\n            if (collectingBanner && bannerNode) {\n                (bannerNode as any).children = [{ type: 'text', value: bannerContent.join(' ') }];\n            }\n            if (collectingCallout && calloutNode) {\n                (calloutNode as any).children = [{ type: 'text', value: calloutContent.join(' ') }];\n            }\n            \n            // Second pass: remove nodes marked for removal\n            visit(tree, 'element', (node: Element, index, parent) => {\n                if (node.properties?.['data-remove'] && parent && typeof index === 'number') {\n                    parent.children.splice(index, 1);\n                    return [SKIP, index];\n                }\n            });\n        };\n    };\n\n    // --- Component Overrides Map ---\n    // Memoize to avoid re-creation on every render, depends on theme for syntax highlighting\n    const markdownComponents = useMemo((): Components => ({\n\n        // Override 'p' for Lead Paragraphs (>>>)\n        p: ({ node, children: pChildren, ...props }: ParagraphProps) => {\n            const textValue = getNodeText(node).trim();\n            const leadMarker = '>>>';\n            if (textValue.startsWith(leadMarker)) {\n                // Simplified logic to remove marker mainly from first text child\n                const stripFirstChildMarker = (childrenToProcess: ReactNode): ReactNode => {\n                    const childrenArray = Children.toArray(childrenToProcess);\n                    if (childrenArray.length > 0 && typeof childrenArray[0] === 'string') {\n                        const firstChild = childrenArray[0];\n                        if (firstChild.startsWith(leadMarker)) {\n                            // Remove the marker and any immediately following whitespace\n                            let modifiedFirst = firstChild.substring(leadMarker.length);\n                            // Trim leading whitespace from the modified text\n                            modifiedFirst = modifiedFirst.replace(/^\\s+/, '');\n                            // Return new array with modified first child\n                            return [modifiedFirst, ...childrenArray.slice(1)];\n                        }\n                    }\n                    return childrenToProcess; // Return original children if no marker found\n                };\n                const modifiedChildren = stripFirstChildMarker(pChildren);\n                return <p className=\"lead-paragraph\" {...props}>{modifiedChildren}</p>;\n            }\n            return <p {...props}>{pChildren}</p>; // Default paragraph\n        },\n\n        // Override 'blockquote' for Styled Quotes (*\"...\"*), Lead Paragraphs (>>>), and standard quotes\n        blockquote: ({ node, children: bqChildren, ...props }: BlockquoteProps) => {\n            // Check if node exists before accessing children (Fixes TS error)\n            if (!node) return <blockquote className=\"standard-blockquote\" {...props}>{bqChildren}</blockquote>;\n\n            // Check for Lead Paragraph syntax (>>> converted to nested blockquotes)\n            const nodeText = getNodeText(node).trim();\n            if (nodeText.startsWith('>>>')) {\n                // Extract the content after the >>> marker\n                const leadContent = nodeText.substring(3).trim();\n                return <p className=\"lead-paragraph\">{leadContent}</p>;\n            }\n            \n            // Check for deeply nested blockquotes (>>> creates nested structure)\n            const checkForLeadParagraph = (currentNode: any): boolean => {\n                if (currentNode.tagName === 'blockquote') {\n                    const childBlockquote = currentNode.children?.find((child: any) => child.tagName === 'blockquote');\n                    if (childBlockquote) {\n                        const grandchildBlockquote = childBlockquote.children?.find((child: any) => child.tagName === 'blockquote');\n                        if (grandchildBlockquote) {\n                            // This is likely a >>> lead paragraph (triple nested)\n                            return true;\n                        }\n                    }\n                }\n                return false;\n            };\n            \n            if (checkForLeadParagraph(node)) {\n                // Extract content from deeply nested structure\n                const content = getNodeText(node).trim();\n                return <p className=\"lead-paragraph\">{content}</p>;\n            }\n\n            // Check for Styled Quote syntax\n            const firstChild = node.children?.[0];\n            if (firstChild?.type === 'element' && firstChild.tagName === 'p') {\n                 const quoteTextContent = getNodeText(firstChild).trim();\n                 if (quoteTextContent.startsWith('*\"') && quoteTextContent.endsWith('\"*')) {\n                     const quoteText = quoteTextContent.substring(2, quoteTextContent.length - 2).trim();\n                     let attributionContent: ReactNode = null;\n                     // Check for attribution in the second paragraph\n                     if (node.children.length > 1) {\n                        const secondChildNode = node.children[1];\n                         if (secondChildNode?.type === 'element' && secondChildNode.tagName === 'p') {\n                             const rawAttributionText = getNodeText(secondChildNode).trim();\n                             const dashMarker = ' ';\n                             attributionContent = rawAttributionText.startsWith(dashMarker)\n                                 ? rawAttributionText.substring(dashMarker.length)\n                                 : rawAttributionText;\n                         }\n                    }\n                     return <CustomQuote attribution={attributionContent}>{quoteText}</CustomQuote>;\n                 }\n            }\n            // Default to standard blockquote rendering\n            return <blockquote className=\"standard-blockquote\" {...props}>{bqChildren}</blockquote>;\n        },\n\n        // Override 'code' for Syntax Highlighting and Inline Code\n        code: ({ inline, className: codeClassName, children: codeChildren, node: _node, ...restProps }: CodeProps) => {\n            const match = /language-(\\w+)/.exec(codeClassName || '');\n            const isBlock = !inline && !!match;\n            const codeString = String(codeChildren ?? '').replace(/\\n$/, '');\n\n            if (!isBlock) {\n                return (\n                    <code\n                        className={`inline-code ${codeClassName || ''}`}\n                        {...restProps}\n                    >\n                        {codeChildren}\n                    </code>\n                );\n            }\n\n            const language = match ? match[1] : 'text';\n            const wrapperRef = useRef<HTMLDivElement | null>(null);\n            const [isVisible, setIsVisible] = useState(false);\n\n            useEffect(() => {\n                const element = wrapperRef.current;\n                if (!element) return;\n\n                const observer = new IntersectionObserver(\n                    (entries) => {\n                        entries.forEach((entry) => {\n                            if (entry.isIntersecting) {\n                                setIsVisible(true);\n                                observer.disconnect();\n                            }\n                        });\n                    },\n                    { rootMargin: '200px' }\n                );\n\n                observer.observe(element);\n                return () => observer.disconnect();\n            }, []);\n\n            const { highlighter, style } = useLazySyntaxHighlighter(isVisible, isDarkMode);\n            const handleCopy = () =>\n                navigator.clipboard.writeText(codeString).catch(err => console.error('Failed to copy code:', err));\n\n            return (\n                <div className=\"code-block-wrapper\" ref={wrapperRef}>\n                    <div className=\"code-block-header\">\n                        <span className=\"code-language\">{language}</span>\n                        <button\n                            type=\"button\"\n                            className=\"code-copy-button\"\n                            onClick={handleCopy}\n                            aria-label=\"Copy code to clipboard\"\n                        >\n                            <Copy size={14} />\n                        </button>\n                    </div>\n                    {highlighter && style ? (\n                        React.createElement(highlighter, {\n                            style,\n                            language,\n                            PreTag: 'div',\n                            customStyle: {\n                                borderRadius: '0 0 var(--radius-lg) var(--radius-lg)',\n                                marginTop: 0,\n                                marginBottom: 0,\n                                padding: '1.2rem 1.5rem',\n                                border: 'none',\n                                background: 'transparent'\n                            },\n                            codeTagProps: {\n                                style: {\n                                    fontFamily: 'var(--font-mono)',\n                                    fontSize: '0.95rem',\n                                    lineHeight: 1.7\n                                }\n                            },\n                            children: codeString\n                        })\n                    ) : (\n                        <pre className=\"code-block-placeholder\">\n                            <code>{codeString}</code>\n                        </pre>\n                    )}\n                </div>\n            );\n        },\n\n        // Override 'img' for Custom Image Handling (Zoom, Effects, Borders, Captions)\n        img: ({ src, alt }: ImgProps) => {\n            if (!src) return <AsciiArtPlaceholder className=\"mx-auto my-8\" />;\n\n            const altString = typeof alt === 'string' ? alt : '';\n            let altText = altString;\n            let imageCaption = '';\n            let imageSize: 'small' | 'medium' | 'large' | 'full' = 'medium';\n            let imageAlign: 'left' | 'center' | 'right' = 'center';\n            let effectClass = '';\n            let borderClass = '';\n            let customWidth: number | undefined;\n            let customHeight: number | undefined;\n\n            if (altString.includes('|')) {\n                const parts = altString.split('|');\n                altText = parts[0].trim();\n\n                parts.slice(1).forEach(part => {\n                    const [key, raw] = part.includes('=') ? part.split('=', 2) : [part.trim(), 'true'];\n                    const trimmedKey = key.trim().toLowerCase();\n                    const trimmedValue = raw.trim().replace(/^[\"']|[\"']$/g, '');\n\n                    switch (trimmedKey) {\n                        case 'size':\n                            if (['small', 'medium', 'large', 'full'].includes(trimmedValue)) {\n                                imageSize = trimmedValue as typeof imageSize;\n                            }\n                            break;\n                        case 'align':\n                            if (['left', 'center', 'right'].includes(trimmedValue)) {\n                                imageAlign = trimmedValue as typeof imageAlign;\n                            }\n                            break;\n                        case 'effect':\n                            effectClass = `image-${trimmedValue}`;\n                            break;\n                        case 'border':\n                            borderClass = `border-${trimmedValue}`;\n                            break;\n                        case 'caption':\n                            imageCaption = trimmedValue;\n                            break;\n                        case 'width':\n                            customWidth = Number(trimmedValue) || undefined;\n                            break;\n                        case 'height':\n                            customHeight = Number(trimmedValue) || undefined;\n                            break;\n                    }\n                });\n            }\n\n            const sizeToSizes: Record<'small' | 'medium' | 'large' | 'full', string> = {\n                small: '(max-width: 768px) 90vw, 320px',\n                medium: '(max-width: 768px) 95vw, 640px',\n                large: '(max-width: 768px) 95vw, 960px',\n                full: '(max-width: 768px) 100vw, 1200px'\n            };\n\n            const widthMap: Record<'small' | 'medium' | 'large' | 'full', number> = {\n                small: 480,\n                medium: 720,\n                large: 1080,\n                full: 1280\n            };\n\n            const responsiveWidth = customWidth ?? widthMap[imageSize];\n            const responsiveHeight = customHeight ?? Math.round(responsiveWidth * 0.5625); // default 16:9\n\n            return (\n                <figure className={`markdown-image-wrapper align-${imageAlign}`}>\n                    <ResponsiveImage\n                        src={src}\n                        alt={altText}\n                        width={responsiveWidth}\n                        height={responsiveHeight}\n                        sizes={sizeToSizes[imageSize]}\n                        className={`content-image image-${imageSize} ${effectClass} ${borderClass}`.trim()}\n                    />\n                    {imageCaption && <figcaption>{imageCaption}</figcaption>}\n                </figure>\n            );\n        },\n\n        // Override Table elements for styling\n        table: ({ node, children, ...props }: TableProps) => (<div className=\"table-wrapper\"><table {...props}>{children}</table></div>),\n        thead: ({ node, children, ...props }) => <thead className=\"md-thead\" {...props}>{children}</thead>,\n        tbody: ({ node, children, ...props }) => <tbody className=\"md-tbody\" {...props}>{children}</tbody>,\n        tr: ({ node, children, ...props }) => <tr className=\"md-tr\" {...props}>{children}</tr>,\n        th: ({ node, children, isHeader, ...props }: TableCellProps) => <th className=\"md-th\" {...props}>{children}</th>,\n        td: ({ node, children, isHeader, ...props }: TableCellProps) => <td className=\"md-td\" {...props}>{children}</td>,\n\n        // Override Headings for styling\n        h1: ({ node, children, level, ...props }: HeadingProps) => <h1 className=\"md-h1\" {...props}>{children}</h1>,\n        h2: ({ node, children, level, ...props }: HeadingProps) => <h2 className=\"md-h2\" {...props}>{children}</h2>,\n        h3: ({ node, children, level, ...props }: HeadingProps) => <h3 className=\"md-h3\" {...props}>{children}</h3>,\n        h4: ({ node, children, level, ...props }: HeadingProps) => <h4 className=\"md-h4\" {...props}>{children}</h4>,\n        h5: ({ node, children, level, ...props }: HeadingProps) => <h5 className=\"md-h5\" {...props}>{children}</h5>,\n        h6: ({ node, children, level, ...props }: HeadingProps) => <h6 className=\"md-h6\" {...props}>{children}</h6>,\n\n        // Override Links for styling and target blank\n        a: ({ node, children, href, ...props }: LinkProps) => ( <a href={href} className=\"md-link\" target={href?.startsWith('http') ? '_blank' : undefined} rel={href?.startsWith('http') ? 'noopener noreferrer' : undefined} {...props}>{children}</a> ),\n\n        // Override Horizontal Rule for styling\n        hr: ({ node, ...props }: HrProps) => <hr className=\"md-hr\" {...props} />,\n\n        // Override Lists for styling\n        ul: ({ node, children, ordered, depth, ...props }: ListProps) => <ul className=\"md-ul\" {...props}>{children}</ul>,\n        ol: ({ node, children, ordered, depth, ...props }: ListProps) => <ol className=\"md-ol\" {...props}>{children}</ol>,\n        li: ({ node, children, checked, index, ordered, ...props }: ListItemProps) => <li className=\"md-li\" {...props}>{children}</li>,\n\n        // Override 'div' to handle components transformed by HAST plugin\n        div: ({ node, children, ...props }: DivProps) => {\n            // Check node existence (Fixes TS error)\n            if (!node) return <div {...props}>{children}</div>;\n\n            const componentType = node.properties?.['data-custom-component'];\n\n            // Render Banner if identified\n            if (componentType === 'banner') {\n                const attrsString = node.properties['data-banner-attrs'];\n                const attributes = typeof attrsString === 'string' ? JSON.parse(attrsString) : {};\n                return <Banner attributes={attributes}>{children}</Banner>;\n            }\n\n            // Render Callout if identified\n            if (componentType === 'callout') {\n                const calloutType = node.properties['data-callout-type'];\n                if (typeof calloutType === 'string') {\n                     return <Callout type={calloutType as CalloutProps['type']}>{children}</Callout>;\n                }\n            }\n\n             // Render ImageGrid if identified\n             if (componentType === 'image-grid') {\n                const columnsAttr = node.properties['data-columns'];\n                const columns = typeof columnsAttr === 'string' ? parseInt(columnsAttr, 10) : 2;\n                // Filter out non-image children if necessary (depends on how HAST plugin structures it)\n                 const imageChildren = Children.toArray(children).filter(child => isValidElement(child)); // Basic filter\n                return <ImageGrid columns={columns}>{imageChildren}</ImageGrid>;\n            }\n\n            // Handle simple alignment divs if raw HTML is used\n            const style = node.properties?.style;\n            if (typeof style === 'string' && (style.includes('text-align: center') || style.includes('text-align: right') || style.includes('text-align: justify'))) {\n                 return <div {...props}>{children}</div>;\n            }\n\n            // Default div rendering\n            return <div {...props}>{children}</div>;\n        },\n\n        // Override 'mark' for styling\n        mark: ({ node, children, ...props }: MarkProps) => {\n           return <mark className=\"markdown-mark\" {...props}>{children}</mark>\n        }\n\n    }), [isDarkMode]); // End of useMemo for components\n\n    // --- Plugin Configuration ---\n    const remarkPlugins: PluggableList = [\n        remarkGfm,              // GitHub Flavored Markdown support\n        remarkMath,             // Math syntax support\n        remarkUnwrapImages      // Remove wrapping <p> tags around images\n    ];\n    const rehypePlugins: PluggableList = [\n        rehypeRaw,              // Allow raw HTML rendering (IMPORTANT)\n        rehypeSlug,             // Add IDs to headings\n        [rehypeAutolinkHeadings, { behavior: 'wrap' }], // Add links to headings\n        rehypeKatex,            // Render math equations\n        rehypeProcessCustomSyntax // Apply custom HAST transformations\n    ];\n\n    // --- Final Render ---\n    return (\n        <div className={`blog-content ${className || ''}`}> {/* Ensure className is applied */}\n            <ReactMarkdown\n                components={markdownComponents}\n                remarkPlugins={remarkPlugins}\n                rehypePlugins={rehypePlugins}\n                // Do NOT use rehypeAllowDangerousHtml - use rehypeRaw plugin instead\n            >\n                {rawMarkdown}\n            </ReactMarkdown>\n        </div>\n    );\n}","// src/components/SEO/ArticleSchema.tsx\n\"use client\";\n\nimport { BlogPostExtended } from '@/types/blog';\n\ninterface ArticleSchemaProps {\n  post: BlogPostExtended;\n  url: string;\n}\n\nexport default function ArticleSchema({ post, url }: ArticleSchemaProps) {\n  const schema = {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"Article\",\n    \"headline\": post.title,\n    \"description\": post.excerpt || post.description,\n    \"image\": post.image ? `https://manic.agency${post.image}` : undefined,\n    \"datePublished\": post.date ? new Date(post.date).toISOString() : undefined,\n    \"dateModified\": post.lastModified ? new Date(post.lastModified).toISOString() : post.date ? new Date(post.date).toISOString() : undefined,\n    \"author\": {\n      \"@type\": \"Person\",\n      \"name\": post.author?.name || \"Manic Agency\",\n      \"url\": post.author?.githubUsername ? `https://github.com/${post.author.githubUsername}` : \"https://manic.agency/team\"\n    },\n    \"publisher\": {\n      \"@type\": \"Organization\",\n      \"name\": \"Manic Agency\",\n      \"logo\": {\n        \"@type\": \"ImageObject\",\n        \"url\": \"https://manic.agency/manic-logo.png\"\n      }\n    },\n    \"mainEntityOfPage\": {\n      \"@type\": \"WebPage\",\n      \"@id\": `https://manic.agency${url}`\n    },\n    \"articleSection\": post.category?.replace(/-/g, ' '),\n    \"keywords\": post.tags?.join(', '),\n    \"wordCount\": post.content ? post.content.split(/\\s+/).length : undefined,\n    \"timeRequired\": post.readingTime ? `PT${post.readingTime}M` : undefined,\n    \"inLanguage\": \"en-US\",\n    \"isAccessibleForFree\": true,\n    \"license\": \"https://creativecommons.org/licenses/by/4.0/\"\n  };\n\n  // Remove undefined values\n  Object.keys(schema).forEach(key => \n    schema[key as keyof typeof schema] === undefined && delete schema[key as keyof typeof schema]\n  );\n\n  return (\n    <script\n      type=\"application/ld+json\"\n      dangerouslySetInnerHTML={{ __html: JSON.stringify(schema) }}\n    />\n  );\n}\n\n","'use client';\n\nimport { useEffect, useRef } from 'react';\nimport { usePathname } from 'next/navigation';\nimport { useAnalytics } from '@/components/Analytics';\n\ninterface ScrollTrackingProps {\n  enabled?: boolean;\n  postTitle?: string;\n  contentSelector?: string;\n}\n\nexport function ScrollTracking({ \n  enabled = true, \n  postTitle,\n  contentSelector = '#post-content-top'\n}: ScrollTrackingProps) {\n  const pathname = usePathname();\n  const { trackEvent, upgradeSession, canTrack } = useAnalytics();\n  const trackedMilestones = useRef(new Set<string>());\n  const startTime = useRef<number>(Date.now());\n\n  useEffect(() => {\n    if (!enabled || !canTrack) return;\n\n    // Reset tracking for new page\n    trackedMilestones.current.clear();\n    startTime.current = Date.now();\n\n    let timeTracking30s: NodeJS.Timeout;\n    let timeTracking60s: NodeJS.Timeout;\n    let timeTracking300s: NodeJS.Timeout;\n\n    // Time-based tracking\n    timeTracking30s = setTimeout(() => {\n      if (!trackedMilestones.current.has('time_30s')) {\n        trackEvent('blog_engagement_time', {\n          duration_seconds: 30,\n          post_title: postTitle,\n          page_path: pathname\n        });\n        trackedMilestones.current.add('time_30s');\n      }\n    }, 30000);\n\n    timeTracking60s = setTimeout(() => {\n      if (!trackedMilestones.current.has('time_60s')) {\n        trackEvent('blog_engagement_time', {\n          duration_seconds: 60,\n          post_title: postTitle,\n          page_path: pathname\n        });\n        trackedMilestones.current.add('time_60s');\n      }\n    }, 60000);\n\n    timeTracking300s = setTimeout(() => {\n      if (!trackedMilestones.current.has('time_300s')) {\n        trackEvent('blog_engagement_time', {\n          duration_seconds: 300,\n          post_title: postTitle,\n          page_path: pathname\n        });\n        trackedMilestones.current.add('time_300s');\n        // Upgrade session for 5+ minute engagement\n        upgradeSession('long_read_engagement');\n      }\n    }, 300000); // 5 minutes\n\n    // Scroll-based tracking\n    const handleScroll = () => {\n      const contentElement = document.querySelector(contentSelector) as HTMLElement;\n      if (!contentElement) return;\n\n      const contentRect = contentElement.getBoundingClientRect();\n      const contentHeight = contentElement.offsetHeight;\n      const viewportHeight = window.innerHeight;\n      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n      \n      // Calculate scroll percentage based on content area\n      const contentTop = contentElement.offsetTop;\n      const scrollPercentage = Math.min(100, Math.max(0, \n        ((scrollTop + viewportHeight - contentTop) / contentHeight) * 100\n      ));\n\n      // Track milestones\n      if (scrollPercentage >= 50 && !trackedMilestones.current.has('scroll_50')) {\n        trackEvent('blog_scroll_depth', {\n          depth_percent: 50,\n          post_title: postTitle,\n          page_path: pathname,\n          scroll_percentage: Math.round(scrollPercentage)\n        });\n        trackedMilestones.current.add('scroll_50');\n      }\n      \n      if (scrollPercentage >= 75 && !trackedMilestones.current.has('scroll_75')) {\n        trackEvent('blog_scroll_depth', {\n          depth_percent: 75,\n          post_title: postTitle,\n          page_path: pathname,\n          scroll_percentage: Math.round(scrollPercentage)\n        });\n        trackedMilestones.current.add('scroll_75');\n        // Upgrade session for deep engagement\n        upgradeSession('deep_scroll_engagement');\n      }\n      \n      if (scrollPercentage >= 90 && !trackedMilestones.current.has('scroll_100')) {\n        trackEvent('blog_scroll_depth', {\n          depth_percent: 90,\n          post_title: postTitle,\n          page_path: pathname,\n          scroll_percentage: Math.round(scrollPercentage)\n        });\n        trackedMilestones.current.add('scroll_100');\n        // Upgrade session for complete reading\n        upgradeSession('complete_read');\n      }\n    };\n\n    // Throttled scroll handler\n    let scrollTimeout: NodeJS.Timeout;\n    const throttledScrollHandler = () => {\n      if (scrollTimeout) clearTimeout(scrollTimeout);\n      scrollTimeout = setTimeout(handleScroll, 100);\n    };\n\n    window.addEventListener('scroll', throttledScrollHandler, { passive: true });\n\n    return () => {\n      window.removeEventListener('scroll', throttledScrollHandler);\n      clearTimeout(timeTracking30s);\n      clearTimeout(timeTracking60s);\n      clearTimeout(timeTracking300s);\n      if (scrollTimeout) clearTimeout(scrollTimeout);\n    };\n  }, [enabled, canTrack, pathname, postTitle, trackEvent, upgradeSession, contentSelector]);\n\n  return null; // This component doesn't render anything\n}\n\nexport default ScrollTracking;\n"],"names":["Promise","resolve","then","__webpack_require__","t","bind","generateSlug","text","toLowerCase","trim","replace","TOP_LINK_ID","BlogSidebarClient","React","tableOfContents","postTitle","param","isDesktopSidebarOpen","setIsDesktopSidebarOpen","useState","saved","localStorage","getItem","isMobileTocOpen","setIsMobileTocOpen","activeHeading","setActiveHeading","showBackToTop","setShowBackToTop","showNumbering","setShowNumbering","sidebarRef","useRef","tocListRef","mobileOverlayRef","getHeaderOffset","useCallback","offset","headerHeightVal","getComputedStyle","document","documentElement","getPropertyValue","parseInt","headingIdsRef","useEffect","ticking","onScroll","window","requestAnimationFrame","scrollY","pageBottom","scrollHeight","innerHeight","current","length","lastId","prev","addEventListener","passive","removeEventListener","contentArea","querySelector","headingElements","Array","from","querySelectorAll","topSentinel","getElementById","map","el","id","visibleMap","Map","observer","IntersectionObserver","entries","forEach","entry","target","isIntersecting","set","offsetTop","delete","size","nextId","sort","a","b","root","rootMargin","threshold","element","observe","unobserve","disconnect","toggleDesktopSidebar","newState","setItem","String","toggleMobileToc","nextState","body","style","overflow","layoutContainer","sidebarElement","classList","toggle","scrollToTop","scrollTo","top","behavior","scrollToElement","slug","elementTop","getBoundingClientRect","console","warn","concat","handleTocClick","e","preventDefault","findActiveIndex","filter","h","level","findIndex","navigateSection","filteredToc","currentIndex","nextIndex","direction","nextHeading","activeElement","tocRect","elemRect","bottom","scrollIntoView","block","toggleNumbering","heading","minLevel","Math","min","renderTocList","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","ul","className","ref","jsx","li","href","onClick","aria-current","undefined","Home","aria-hidden","span","isActive","relativeLevel","Fragment","aside","aria-label","div","button","type","aria-expanded","aria-controls","title","ChevronsLeft","ChevronsRight","IconPageTurnPrev","IconPageTurnNext","nav","p","IconOrnateUpArrow","width","height","aria-pressed","Hash","Link","IconOrnateList","BookOpen","role","aria-modal","aria-labelledby","inert","h2","X","ScrollToTop","displayName","__webpack_exports__","BlogPageClient","children","isReadingMode","setIsReadingMode","savedPref","JSON","parse","error","stringify","IconReadingMode","DisqusComments","postUrl","postIdentifier","isDarkMode","mounted","useTheme","disqusRef","disqusLoaded","setDisqusLoaded","initialThemeDetected","setInitialThemeDetected","siteUrl","process","env","NEXT_PUBLIC_SITE_URL","fullUrl","setAttribute","DISQUS","reset","reload","config","page","identifier","url","err","checkDisqusLoaded","innerHTML","timer","setTimeout","MutationObserver","childList","subtree","clearTimeout","data-theme","h3","DiscussionEmbed","shortname","language","GiscusComments","giscusTheme","setGiscusTheme","GISCUS_CONFIG","REPO","REPO_ID","CATEGORY","CATEGORY_ID","Giscus","repo","repoId","category","categoryId","mapping","MAPPING","strict","STRICT","reactionsEnabled","REACTIONS","emitMetadata","EMIT_METADATA","inputPosition","INPUT_POSITION","theme","lang","LANG","loading","LOADING","ResponsiveImage","src","alt","priority","sizes","jsx_runtime","Image","quality","placeholder","blurDataURL","getNodeText","node","value","isArray","join","parseAttributes","match","attributes","regex","exec","attrString","key","ImageGrid","columns","gridTemplateColumns","Banner","backgroundColor","color","textColor","textAlign","alignment","padding","icon","marginRight","Callout","Icon","note","Info","warning","AlertTriangle","tip","Lightbulb","alert","Siren","charAt","toUpperCase","slice","CustomQuote","attribution","blockquote","footer","useLazySyntaxHighlighter","shouldLoad","highlighter","setHighlighter","setStyle","cancelled","load","Prism","themeModule","all","coldarkDark","prism","CustomMarkdownRenderer","rawMarkdown","markdownComponents","useMemo","pChildren","props","textValue","startsWith","modifiedChildren","stripFirstChildMarker","childrenArray","Children","toArray","childrenToProcess","firstChild","modifiedFirst","substring","bqChildren","nodeText","leadContent","checkForLeadParagraph","currentNode","tagName","childBlockquote","find","child","grandchildBlockquote","content","quoteTextContent","endsWith","quoteText","attributionContent","secondChildNode","rawAttributionText","dashMarker","code","inline","codeClassName","codeChildren","_node","restProps","codeString","wrapperRef","isVisible","setIsVisible","navigator","clipboard","writeText","catch","Copy","PreTag","customStyle","borderRadius","marginTop","marginBottom","border","background","codeTagProps","fontFamily","fontSize","lineHeight","pre","img","customWidth","customHeight","AsciiArtPlaceholder","altString","altText","imageCaption","imageSize","imageAlign","effectClass","borderClass","includes","parts","split","part","raw","trimmedKey","trimmedValue","Number","responsiveWidth","widthMap","small","medium","large","full","responsiveHeight","round","figure","sizeToSizes","figcaption","table","thead","tbody","tr","th","isHeader","td","h1","h4","h5","h6","rel","hr","ordered","depth","ol","checked","index","componentType","properties","attrsString","calloutType","columnsAttr","imageChildren","isValidElement","mark","remarkPlugins","remarkGfm","remarkMath","remarkUnwrapImages","rehypePlugins","rehypeRaw","rehypeSlug","rehypeAutolinkHeadings","rehypeKatex","collectingBanner","bannerNode","bannerContent","collectingCallout","calloutNode","calloutContent","visit","tree","parent","textContent","singleLineBannerMatch","bannerText","bannerStartMatch","remainingText","push","calloutMatch","gridMatch","splice","SKIP","ReactMarkdown","components","ArticleSchema","post","schema","excerpt","description","image","date","Date","toISOString","lastModified","author","name","githubUsername","tags","readingTime","Object","keys","script","dangerouslySetInnerHTML","__html","enabled","contentSelector","pathname","usePathname","trackEvent","upgradeSession","canTrack","useAnalytics","trackedMilestones","Set","startTime","now","timeTracking30s","timeTracking60s","timeTracking300s","scrollTimeout","clear","has","duration_seconds","post_title","page_path","add","handleScroll","contentElement","contentHeight","offsetHeight","viewportHeight","scrollPercentage","max","scrollTop","pageYOffset","depth_percent","scroll_percentage","throttledScrollHandler"],"sourceRoot":""}