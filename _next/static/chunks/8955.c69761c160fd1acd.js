"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8955],{68955:function(e,n,r){r.r(n),r.d(n,{SenderScript:function(){return t}});var o=r(2265),i=r(40257);function t(e){let{accountId:n}=e;return(0,o.useEffect)(()=>{let e=e=>{var n,r;let o=(null===(n=e.message)||void 0===n?void 0:n.toLowerCase())||"",i=(null===(r=e.filename)||void 0===r?void 0:r.toLowerCase())||"";return(!!(o.includes("unexpected token")||o.includes("syntaxerror")||o.includes("doctype")||o.includes("cannot read properties")||o.includes("typeerror")||i.includes("sender.net")||i.includes("universal.js")||o.includes("json")&&o.includes("token")||i.includes("emailoctopus")||i.includes("eocampaign1.com")||o.includes("parentnode")||o.includes("removechild")||o.includes("notfounderror")||o.includes("failed to execute")||o.includes("node to be removed is not a child"))||(o.includes("metamask"),!1))&&(console.warn("\uD83D\uDEA8 Service/DOM error detected and suppressed:",{message:e.message,filename:e.filename,type:i.includes("sender")?"Sender.net service error":i.includes("emailoctopus")||i.includes("eocampaign1")?"EmailOctopus script error":o.includes("removechild")||o.includes("notfounderror")?"React DOM cleanup error":o.includes("metamask")?"MetaMask dev error":"Service error"}),!0)},r=e=>{var n,r,o,i,t;let s=(null===(r=e.reason)||void 0===r?void 0:null===(n=r.toString)||void 0===n?void 0:n.call(r))||"",d=(null===(t=e.reason)||void 0===t?void 0:null===(i=t.message)||void 0===i?void 0:null===(o=i.toLowerCase)||void 0===o?void 0:o.call(i))||"";if(d.includes("unexpected token")||d.includes("syntaxerror")||d.includes("doctype")||d.includes("cannot read properties")||d.includes("typeerror")||s.includes("404")||s.includes("sender.net")||s.includes("universal.js")||d.includes("json")&&d.includes("token")||s.includes("emailoctopus")||s.includes("eocampaign1.com")||d.includes("parentnode")||d.includes("removechild")||d.includes("notfounderror")||d.includes("failed to execute")||d.includes("node to be removed is not a child")){let n=s.includes("sender")?"Sender.net service error":s.includes("emailoctopus")||s.includes("eocampaign1")?"EmailOctopus service error":d.includes("removechild")||d.includes("notfounderror")?"DOM cleanup error":"Service error";console.warn("\uD83D\uDEA8 Service/DOM error detected - likely service instability or DOM conflict:",{reason:e.reason,type:"Promise rejection - ".concat(n)}),e.preventDefault()}};window.addEventListener("error",e),window.addEventListener("unhandledrejection",r);let o=window.fetch;if(window.fetch=async function(){for(var e,n,r=arguments.length,i=Array(r),t=0;t<r;t++)i[t]=arguments[t];try{let n=await o(...i),r=(null===(e=i[0])||void 0===e?void 0:e.toString())||"";if(r.includes("sender.net")&&!n.ok&&(console.warn("\uD83D\uDEA8 Sender.net service request failed:",{url:r,status:n.status,statusText:n.statusText,type:"Network response error"}),r.includes("config.json")))return new Response("{}",{status:200,statusText:"OK",headers:{"Content-Type":"application/json"}});return n}catch(e){if(((null===(n=i[0])||void 0===n?void 0:n.toString())||"").includes("sender.net"))return console.warn("\uD83D\uDEA8 Sender.net service fetch error:",e),new Response("{}",{status:200,statusText:"OK",headers:{"Content-Type":"application/json"}});throw e}},console.log("\uD83D\uDD0D SenderScript Debug:",{accountId:n,accountIdFromEnv:i.env.NEXT_PUBLIC_SENDER_ACCOUNT_ID,windowSender:!!window.sender,windowSenderCapital:!!window.Sender}),!n||""===n.trim()){console.warn("⚠️ Sender accountId is empty or undefined, skipping initialization");return}if(window.Sender||window.sender){console.log("✅ Sender already initialized");try{window.sender&&"function"==typeof window.sender&&(window.sender(n),console.log("✅ Re-initialized with account ID:",n))}catch(e){console.log("Could not re-initialize:",e)}return}let t=document.createElement("script");t.src="https://cdn.sender.net/accounts_resources/universal.js",t.async=!0,window.sender=window.sender||function(){(window.sender.q=window.sender.q||[]).push(arguments)},window.sender.l=Date.now();let s=window.onerror;return window.onerror=function(e,n,r,o,i){let t=(null==e?void 0:e.toString().toLowerCase())||"",d=(null==n?void 0:n.toString().toLowerCase())||"";return d.includes("universal.js")&&d.includes("sender.net")||t.includes("cannot read properties")&&t.includes("undefined")||t.includes("typeerror")&&d.includes("sender")?(console.warn("\uD83D\uDEA8 Sender.net universal.js script error suppressed:",{message:t,source:d,line:r,column:o,error:null==i?void 0:i.toString(),type:"Sender.net service instability"}),!0):!!s&&s(e,n,r,o,i)},t.onload=function(){console.log("\uD83D\uDE80 Sender universal script loaded, initializing with account ID:",n),setTimeout(()=>{if(window.sender&&"function"==typeof window.sender)try{window.sender("config",n),window.sender(n),console.log("✅ Sender initialized with account ID:",n)}catch(e){console.error("❌ Error initializing Sender:",e),console.log("\uD83D\uDD0D Account ID that failed:",n)}else console.error("❌ window.sender is not available after script load")},750)},t.onerror=function(e){console.error("❌ Failed to load Sender script:",e),console.log("\uD83D\uDD0D Script src:",t.src)},document.head.appendChild(t),console.log("✅ Sender initialization script added"),()=>{window.removeEventListener("error",e),window.removeEventListener("unhandledrejection",r),window.fetch=o,window.onerror=s}},[n]),null}}}]);
//# sourceMappingURL=8955.c69761c160fd1acd.js.map