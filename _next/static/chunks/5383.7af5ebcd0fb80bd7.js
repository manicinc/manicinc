"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5383],{75383:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var r=n(57437),s=n(2265),i=n(18133);function c(e){let{formId:t,className:n="",variant:c="main",showTitle:o=!0}=e,l=(0,s.useRef)(null),a=(0,s.useRef)(!1),u=(0,s.useRef)(null),{trackEvent:d}=(0,i.z$)();(0,s.useEffect)(()=>{let e;let n=()=>{if(a.current)return;a.current=!0;let e=l.current;if(!e)return;e.innerHTML="";let n=document.createElement("script");n.src="https://eocampaign1.com/form/".concat(t,".js"),n.async=!0,n.setAttribute("data-form",t),n.onerror=()=>{console.warn("EmailOctopus script failed to load - this can be expected in build/test environments")},e.appendChild(n),u.current=n,i();let r=new MutationObserver(e=>{for(let o of e)for(let e of Array.from(o.addedNodes)){var n,s,i;if(e instanceof HTMLElement&&((null===(n=e.closest)||void 0===n?void 0:n.call(e,".emailoctopus-success-message"))||(null===(s=e.querySelector)||void 0===s?void 0:s.call(e,".emailoctopus-success-message"))||(null===(i=e.classList)||void 0===i?void 0:i.contains("emailoctopus-success-message")))){d("newsletter_signup_success",{provider:"emailoctopus",form_id:t,variant:c}),r.disconnect();return}}});r.observe(e,{childList:!0,subtree:!0});let s=()=>{let n=e.querySelector("form");return!!n&&(n.addEventListener("submit",()=>{d("newsletter_submit",{provider:"emailoctopus",form_id:t,variant:c})},{once:!0}),!0)};s()||setTimeout(s,1500)},r=null,s=()=>n(),i=()=>{if(r&&l.current)try{r.unobserve(l.current)}catch(e){}null==r||r.disconnect(),window.removeEventListener("scroll",s),window.removeEventListener("click",s),window.removeEventListener("touchstart",s)};return!l.current||a.current||(r=new IntersectionObserver(e=>{for(let t of e)if(t.isIntersecting){n();break}},{rootMargin:"200px 0px"})).observe(l.current),a.current||(window.addEventListener("scroll",s,{passive:!0,once:!0}),window.addEventListener("click",s,{once:!0}),window.addEventListener("touchstart",s,{passive:!0,once:!0}),e=()=>n(),"requestIdleCallback"in window?window.requestIdleCallback(e,{timeout:4e3}):setTimeout(e,3e3)),()=>{i();let e=l.current,t=u.current;e&&t&&t.parentNode===e&&e.removeChild(t)}},[t]);let m="blog"===c?{title:"Join The Looking Glass",subtitle:"Weekly insights on digital consciousness and creative technology."}:{title:"Subscribe to Our Newsletter",subtitle:"Strategic intelligence on digital transformation and innovation."};return(0,r.jsxs)("div",{className:"email-octopus-form ".concat(n),children:[o&&(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("h3",{className:"text-2xl font-display font-bold text-text-primary mb-3",children:m.title}),(0,r.jsx)("p",{className:"text-text-secondary",children:m.subtitle})]}),(0,r.jsx)("div",{ref:l,className:"emailoctopus-script-container"}),(0,r.jsxs)("p",{className:"mt-4 text-xs text-text-muted text-center",children:["We respect your privacy. Unsubscribe at any time."," ",(0,r.jsx)("a",{href:"/privacy",className:"text-accent-burgundy hover:text-accent-highlight underline",children:"Privacy Policy"})]})]})}}}]);
//# sourceMappingURL=5383.7af5ebcd0fb80bd7.js.map