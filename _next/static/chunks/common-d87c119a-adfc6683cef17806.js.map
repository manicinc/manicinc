{"version":3,"file":"static/chunks/common-d87c119a-adfc6683cef17806.js","mappings":"+LAYA,IAAMA,EAAeC,CAAAA,EAAAA,EAAAA,aAAAA,EAA6CC,KAAAA,GAGrDC,EAAgB,OAAC,CAAEC,SAAAA,CAAQ,CAA2B,CAAAC,EACzD,CAACC,EAAOC,EAAc,CAAGC,CAAAA,EAAAA,EAAAA,QAAAA,EAA2B,SACpD,CAACC,EAASC,EAAW,CAAGF,CAAAA,EAAAA,EAAAA,QAAAA,EAAkB,IAC1C,CAACG,EAAiBC,EAAmB,CAAGJ,CAAAA,EAAAA,EAAAA,QAAAA,EAAkB,IAGhEK,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACNH,EAAW,IAuCXI,CApCwB,KACpB,IAAIC,EACJ,GAAI,KACgBC,EAAhBD,EAAe,OAACC,CAAAA,EAAAA,aAAaC,OAAO,CAAC,WAArBD,KAAAA,IAAAA,EAAAA,EACAE,OAAOC,UAAU,CAAC,gCAAgCC,OAAO,CAAG,OAAS,QAEhFC,SAASC,eAAe,CAACC,SAAS,CAACC,QAAQ,CAAC,QAC7CT,EAAe,OACPM,SAASC,eAAe,CAACC,SAAS,CAACC,QAAQ,CAAC,UACnDT,CAAAA,EAAe,QAGxB,CAAE,MAAOU,EAAG,CACRC,QAAQC,IAAI,CAAC,qEACbZ,EAAeG,OAAOC,UAAU,CAAC,gCAAgCC,OAAO,CAAG,OAAS,OACxF,CAEAM,QAAQE,GAAG,CAAC,8CAA+Cb,GAC3DR,EAAcQ,GAITM,SAASC,eAAe,CAACC,SAAS,CAACC,QAAQ,CAACT,KAC5CW,QAAQE,GAAG,CAAC,gEAA6EC,MAAA,CAAbd,EAAa,MACzFM,SAASC,eAAe,CAACC,SAAS,CAACO,MAAM,CAAC,QAAS,QACnDT,SAASC,eAAe,CAACC,SAAS,CAACQ,GAAG,CAAChB,GACvCM,SAASC,eAAe,CAACU,KAAK,CAACC,WAAW,CAAC,eAAgBlB,IAIhEmB,sBAAsB,KACjBb,SAASC,eAAe,CAACa,YAAY,CAAC,oBAAqB,QAC3DT,QAAQE,GAAG,CAAC,gCACjB,EACJ,KAKA,IAAMQ,EAAW,IAAIC,iBAAiB,IAClCC,EAAUC,OAAO,CAAC,IACd,GAAIC,UAAAA,EAASC,aAAa,EAAgB,CAAC9B,EAAiB,CAExD,IAAM+B,EAAeC,SADMrB,eAAe,CAACC,SAAS,CAACC,QAAQ,CAAC,QAC7B,OAAS,QACtCkB,IAAiBpC,IAChBoB,QAAQE,GAAG,CAAC,2DAA4Dc,GACxEnC,EAAcmC,GAEvB,CACJ,EACJ,GAEAN,EAASQ,OAAO,CAACvB,SAASC,eAAe,CAAE,CAAEuB,WAAY,EAAK,GAG9D,IAAMC,EAAa5B,OAAOC,UAAU,CAAC,gCAC/B4B,EAAqB,IAEtB,GAAI,CACA,GAAI/B,OAAAA,aAAaC,OAAO,CAAC,SAAmB,CACxC,IAAM+B,EAAiBvB,EAAEL,OAAO,CAAG,OAAS,QAC5CM,QAAQE,GAAG,CAAC,qCAAsCoB,GAElDC,EAASD,EACb,CACJ,CAAE,MAAOE,EAAO,CACbxB,QAAQC,IAAI,CAAC,6FAChB,CACL,EAKA,OAHAmB,EAAWK,gBAAgB,CAAC,SAAUJ,GAG/B,KACHX,EAASgB,UAAU,GACnBN,EAAWO,mBAAmB,CAAC,SAAUN,EAC5C,CAGL,EAAG,EAAE,EAIL,IAAMO,EAAmBC,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,IACjC,GAAI5C,GAAmB,CAACF,EAAS,OAEjC,IAAM+C,EAAOnC,SAASC,eAAe,CAC/BoB,EAAec,EAAKjC,SAAS,CAACC,QAAQ,CAAC,QAAU,OAAS,QAEhE,GAAIiC,IAAaf,EAAc,CAC3BhB,QAAQE,GAAG,CAAC,uBAAwB6B,GAEhCnD,IAAUmD,GAAUlD,EAAckD,GACtC,MACJ,CAEA/B,QAAQE,GAAG,CAAC,0BAA6C6B,MAAAA,CAAnBf,EAAa,QAAeb,MAAA,CAAT4B,IACzD7C,EAAmB,IAGnB4C,EAAKjC,SAAS,CAACQ,GAAG,CAAC,uBAGnByB,EAAKjC,SAAS,CAACO,MAAM,CAACY,GACtBc,EAAKjC,SAAS,CAACQ,GAAG,CAAC0B,GAGnBD,EAAKxB,KAAK,CAACC,WAAW,CAAC,eAAgBwB,GAGvClD,EAAckD,GAGd,GAAI,CACAzC,aAAa0C,OAAO,CAAC,QAASD,GAC9B/B,QAAQE,GAAG,CAAC,+BAAgC6B,EAChD,CAAE,MAAOhC,EAAG,CACRC,QAAQwB,KAAK,CAAC,wCAAyCzB,EAC3D,CAKAkC,WAAW,KACNH,EAAKjC,SAAS,CAACO,MAAM,CAAC,uBACtBlB,EAAmB,IACnBc,QAAQE,GAAG,CAAC,6CAAsDC,MAAA,CAAT4B,GAC9D,EAL2B,IAO/B,EAAG,CAAC9C,EAAiBF,EAASH,EAAM,EAG9BsD,EAAcL,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,KAC5B,IAAMb,EAAerB,SAASC,eAAe,CAACC,SAAS,CAACC,QAAQ,CAAC,QAAU,OAAS,QAEpFE,QAAQE,GAAG,CAAC,wBACZ0B,EAFiBZ,SAAAA,EAA0B,QAAU,OAGzD,EAAG,CAACY,EAAiB,EAGfL,EAAWM,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,IACxB7B,QAAQE,GAAG,CAAC,yBAA0B6B,GACvCH,EAAiBG,EACrB,EAAG,CAACH,EAAiB,EAIpBzC,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACN,GAAIJ,EAEA,OADAS,OAAO0C,WAAW,CAAGA,EACd,KACH,OAAO1C,OAAO0C,WAAW,CAGrC,EAAG,CAACnD,EAASmD,EAAY,EAI1B,IAAMC,EAAkCpD,EAClC,CAAEqD,WAAYxD,SAAAA,EAAkBA,MAAAA,EAAO2C,SAAAA,EAAUW,YAAAA,EAAanD,QAAAA,CAAQ,EACtE,CACIqD,WAAY,GACZxD,MAAO,QACP2C,SAAU,IAAMvB,QAAQC,IAAI,CAAC,kCAC7BiC,YAAa,IAAMlC,QAAQC,IAAI,CAAC,kCAChClB,QAAS,EACb,EAEN,MACI,GAAAsD,EAAAC,GAAA,EAAChE,EAAaiE,QAAQ,EAACC,MAAOL,WACzBzD,GAGb,EAGa+D,EAAW,KACpB,IAAMC,EAAUC,CAAAA,EAAAA,EAAAA,UAAAA,EAAWrE,GAE3B,GAAIoE,KAAYlE,IAAZkE,EAAuB,CAEvB1C,QAAQC,IAAI,CAAC,2EAIb,IAAI2C,EAAiB,GAEhB,GAAI,CACDA,EAAiBtD,SAAAA,aAAaC,OAAO,CAAC,UACpB,CAACD,aAAaC,OAAO,CAAC,UAAYC,OAAOC,UAAU,CAAC,gCAAgCC,OAAO,CAC9G,MAAAK,EAAM,CAAC,CAGd,MAAO,CACHqC,WAAYQ,EACZhE,MAAOgE,EAAiB,OAAS,QACjCrB,SAAU,IAAMvB,QAAQwB,KAAK,CAAC,uDAC9BU,YAAa,IAAMlC,QAAQwB,KAAK,CAAC,0DACjCzC,QAAS,EACb,CACJ,CAEA,OAAO2D,CACX,uECzNA,IAAMG,EAAc,8BAKb,SAASC,IACd,GAAM,CAACC,EAAWC,EAAa,CAAGlE,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IACrC,CAACmE,EAAmBC,EAAqB,CAAGpE,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IACrD,CAACqE,EAAWC,EAAa,CAAGtE,CAAAA,EAAAA,EAAAA,QAAAA,EAAgC,MAG5DuE,EAAYxB,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,KAU5B,GAAI,CACF,IAAMyB,EAAShE,aAAaC,OAAO,CAACsD,GACpC,GAAIS,EACF,OAAOC,KAAKC,KAAK,CAACF,EAEtB,CAAE,MAAO9B,EAAO,CACdxB,QAAQC,IAAI,CAAC,yCAA0CuB,EACzD,CAEA,MAAO,CACLiC,YAAa,GACbC,oBAAqB,GACrBC,aAAc,GACdC,cAAe,IACjB,CACF,EAAG,EAAE,EAGCC,EAAYhC,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,IAG5B,GAAI,CACFvC,aAAa0C,OAAO,CAACa,EAAaU,KAAKO,SAAS,CAACC,GACnD,CAAE,MAAOvC,EAAO,CACdxB,QAAQC,IAAI,CAAC,yCAA0CuB,EACzD,CACF,EAAG,EAAE,EAGCwC,EAAkBnC,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,KAClC,IAAMkC,EAAQV,IAGd,GAAIU,EAAMN,WAAW,EAAIM,EAAML,mBAAmB,CAChD,MAAO,GAIT,GAAIK,EAAMH,aAAa,CAAE,CACvB,IAAMK,EAAY,IAAIC,KAAKH,EAAMH,aAAa,EAI9C,GAAIO,CAFeC,IADHF,OACOG,OAAO,GAAKJ,EAAUI,OAAO,IAAO,MA3D3C,EA8Dd,MAAO,EAEX,CAEA,MAAO,EACT,EAAG,CAAChB,EAAU,EAGRiB,EAAezC,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,KAC/B,IAAM0C,EAAY/E,OAAOgF,OAAO,CAC1BC,EAAejF,OAAOkF,WAAW,CAEdH,EAAaI,CAAAA,SADN/E,eAAe,CAACgF,YAAY,CACLH,CAAAA,GA5ElC,KA8EuB,CAACxB,IAC3CC,EAAqB,IAGjBC,GACF0B,aAAa1B,GAkBfC,EAdqBnB,WAAW,KAC1B+B,MACFhB,EAAa,IAIba,EAAU,CADIR,GAAAA,GAEZ,CACAM,aAAc,GACdC,cAAe,IAAIM,OAAOY,WAAW,EACvC,GAEJ,EAlGW,MAsGf,EAAG,CAAC7B,EAAmBE,EAAWa,EAAiBX,EAAWQ,EAAU,EAGxE1E,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACR,GAAK6E,IAML,OAFAxE,OAAOiC,gBAAgB,CAAC,SAAU6C,EAAc,CAAES,QAAS,EAAK,GAEzD,KACLvF,OAAOmC,mBAAmB,CAAC,SAAU2C,GACjCnB,GACF0B,aAAa1B,EAEjB,CACF,EAAG,CAACmB,EAAcN,EAAiBb,EAAU,EAG7C,IAAM6B,EAAanD,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,KAC7BmB,EAAa,GACf,EAAG,EAAE,EA6BL,MAAO,CACLD,UAAAA,EACAiC,WAAAA,EACAC,eA7BqBpD,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,KAEjCgC,EAAU,CADIR,GAAAA,GAEZ,CACAK,oBAAqB,EACvB,GACAV,EAAa,GACf,EAAG,CAACK,EAAWQ,EAAU,EAuBvBqB,eApBqBrD,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,KAEjCgC,EAAU,CADIR,GAAAA,GAEZ,CACAI,YAAa,EACf,GACAT,EAAa,GACf,EAAG,CAACK,EAAWQ,EAAU,EAcvBsB,WAXiBtD,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,KAE3BvC,aAAa8F,UAAU,CAACvC,EAE5B,EAAG,EAAE,CAQL,CACF,uECvJA,IAAMwC,EAAsB,uBAGrB,SAASC,QAwHoBC,EACAA,EACCA,EAzHnC,GAAM,CAACA,EAAaC,EAAe,CAAG1G,CAAAA,EAAAA,EAAAA,QAAAA,EAAmC,MACnE,CAAC2G,EAAYC,EAAc,CAAG5G,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IAE7CK,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KAER,IAAMwG,EAAe,KACnB,IAAMC,EAAetG,aAAaC,OAAO,CAAC8F,GAC1C,GAAIO,EACF,GAAI,CACF,GAAM,CAAEL,YAAaM,CAAU,CAAEC,QAAAA,CAAO,CAAE,CAAGvC,KAAKC,KAAK,CAACoC,GACxD,GAAIE,QAAAA,EAA6B,CAC/BN,EAAeK,GACfH,EAAc,IAEdK,EAAqBF,GACrB,MACF,CACF,CAAE,MAAO9F,EAAG,CACVC,QAAQC,IAAI,CAAC,8BACf,CAEFyF,EAAc,GAChB,EAEAC,IAGA,IAAMK,EAAsB,IAAML,IAGlC,OAFAnG,OAAOiC,gBAAgB,CAAC,yBAA0BuE,GAE3C,KACLxG,OAAOmC,mBAAmB,CAAC,yBAA0BqE,EACvD,CACF,EAAG,EAAE,EAEL,IAAMD,EAAuB,IAI3B,GAFApG,SAASsG,MAAM,CAAG,uCAA0D9F,MAAA,CAAnB,QAAmB,kBAExE+F,EAAMC,SAAS,CASjB,IAPAxG,SAASsG,MAAM,CAAG,4CAA+D9F,MAAA,CAAnB,QAAmB,kBAE5CX,OAAO4G,IAAI,EAC9C5G,OAAO4G,IAAI,CAAC,UAAW,SAAU,CAC/B,kBAAqB,SACvB,GAEmC5G,OAAgB6G,OAAO,CAC1D,GAAI,CAAG7G,OAAe6G,OAAO,CAAC,UAAW,GAAO,CAAE,MAAAtG,EAAM,CAAC,CAC3D,MASA,GANAJ,SAASsG,MAAM,CAAI,kEACkBzG,OAAO4G,IAAI,EAC9C5G,OAAO4G,IAAI,CAAC,UAAW,SAAU,CAC/B,kBAAqB,QACvB,GAEmC5G,OAAgB6G,OAAO,CAC1D,GAAI,CAAG7G,OAAe6G,OAAO,CAAC,UAAW,GAAQ,CAAE,MAAAtG,EAAM,CAAC,CAI1DmG,EAAMI,SAAS,CAEjB3G,SAASsG,MAAM,CAAG,4CAA+D9F,MAAA,CAAnB,QAAmB,kBAGjFR,SAASsG,MAAM,CAAI,kEAGjBC,EAAMK,UAAU,CAElB5G,SAASsG,MAAM,CAAG,6CAAgE9F,MAAA,CAAnB,QAAmB,kBAGlFR,SAASsG,MAAM,CAAI,kEAEvB,EAsCA,MAAO,CACLR,WAAAA,EACAe,gBAAiBf,GAAeF,OAAAA,CAAAA,EAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAae,SAAS,GAAtBf,KAAAA,IAAAA,GAAAA,EAChCkB,gBAAiBhB,GAAeF,OAAAA,CAAAA,EAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAaY,SAAS,GAAtBZ,KAAAA,IAAAA,GAAAA,EAChCmB,iBAAkBjB,GAAeF,OAAAA,CAAAA,EAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAagB,UAAU,GAAvBhB,KAAAA,IAAAA,GAAAA,EACjCA,YAAAA,EACAoB,kBA1CwB,IAQxB,IAAMC,EAAe,CAFrB,GALqBrB,GAAe,CAClCsB,UAAW,GACXV,UAAW,GACXI,WAAY,GACZD,UAAW,EACb,CAEuB,CAAiB,GAAGQ,CAAQ,EACnDtB,EAAeoB,GACflB,EAAc,IAGd,IAAMqB,EAAc,CAClBxB,YAAaqB,EACbd,QAnGkB,MAoGlBkB,UAAW9C,KAAKE,GAAG,EACrB,EAEA9E,aAAa0C,OAAO,CAACqD,EAAqB9B,KAAKO,SAAS,CAACiD,IAGzDhB,EAAqBa,GAGrBpH,OAAOyH,aAAa,CAAC,IAAIC,YAAY,0BACvC,EAiBEC,WAfiB,KAEjB7H,aAAa8F,UAAU,CAACC,GACxBK,EAAc,IACdF,EAAe,MACfhG,OAAOyH,aAAa,CAAC,IAAIC,YAAY,8BACvC,CAUA,CACF","sources":["webpack://_N_E/./src/context/ThemeContext.tsx","webpack://_N_E/./src/hooks/useBlogNewsletterModal.tsx","webpack://_N_E/./src/hooks/useCookieConsent.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useState, useContext, useEffect, ReactNode, useCallback } from 'react';\n\ninterface ThemeContextProps {\n    isDarkMode: boolean;\n    theme: 'dark' | 'light';\n    setTheme: (theme: 'dark' | 'light') => void;\n    toggleTheme: () => void;\n    mounted: boolean; // Expose mounted state if needed elsewhere\n}\n\nconst ThemeContext = createContext<ThemeContextProps | undefined>(undefined);\n\n\nexport const ThemeProvider = ({ children }: { children: ReactNode }) => {\n    const [theme, setThemeState] = useState<'dark' | 'light'>('light'); // Default to light for SSR safety\n    const [mounted, setMounted] = useState<boolean>(false);\n    const [isTransitioning, setIsTransitioning] = useState<boolean>(false);\n\n    // ---- Initialization Effect ----\n    useEffect(() => {\n        setMounted(true);\n\n        // Function to read and apply the theme from storage/DOM\n        const initializeTheme = () => {\n            let initialTheme: 'dark' | 'light';\n            try {\n                initialTheme = (localStorage.getItem('theme') as 'dark' | 'light') ??\n                               (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');\n                 // More robust: check class on HTML AFTER checking localStorage\n                 if (document.documentElement.classList.contains('dark')) {\n                    initialTheme = 'dark';\n                 } else if (document.documentElement.classList.contains('light')) {\n                     initialTheme = 'light';\n                 }\n\n            } catch (e) {\n                console.warn('Could not access localStorage for theme, using system preference.');\n                initialTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n            }\n\n            console.log('ThemeContext Initializing - Detected theme:', initialTheme);\n            setThemeState(initialTheme);\n\n            // Sync DOM class *if necessary* (inline script should handle initial)\n            // Only update if different from current state to avoid unnecessary triggers\n            if (!document.documentElement.classList.contains(initialTheme)) {\n                 console.log(`Syncing DOM class on init. Removing 'light', 'dark', adding '${initialTheme}'`);\n                 document.documentElement.classList.remove('light', 'dark');\n                 document.documentElement.classList.add(initialTheme);\n                 document.documentElement.style.setProperty('color-scheme', initialTheme);\n            }\n\n            // Mark theme as loaded for CSS transitions/opacity\n            requestAnimationFrame(() => {\n                 document.documentElement.setAttribute('data-theme-loaded', 'true');\n                 console.log('data-theme-loaded set to true');\n            });\n        };\n\n        initializeTheme();\n\n        // ---- Observer for external changes (e.g., browser dev tools, extensions) ----\n        const observer = new MutationObserver((mutations) => {\n            mutations.forEach((mutation) => {\n                if (mutation.attributeName === 'class' && !isTransitioning) {\n                    const newIsDark = document.documentElement.classList.contains('dark');\n                    const currentTheme = newIsDark ? 'dark' : 'light';\n                    if (currentTheme !== theme) {\n                         console.log('DOM class changed externally, updating context state to:', currentTheme);\n                         setThemeState(currentTheme);\n                    }\n                }\n            });\n        });\n\n        observer.observe(document.documentElement, { attributes: true });\n\n        // ---- Listener for system preference changes ----\n        const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n        const handleSystemChange = (e: MediaQueryListEvent) => {\n             // Only change if no theme is explicitly set in localStorage\n             try {\n                 if (localStorage.getItem('theme') === null) {\n                     const newSystemTheme = e.matches ? 'dark' : 'light';\n                     console.log('System theme changed, updating to:', newSystemTheme);\n                     // Use the main setTheme function to handle the update\n                     setTheme(newSystemTheme);\n                 }\n             } catch (error) {\n                console.warn(\"Could not access localStorage to check for existing theme preference during system change.\");\n             }\n        };\n\n        mediaQuery.addEventListener('change', handleSystemChange);\n\n\n        return () => {\n            observer.disconnect();\n            mediaQuery.removeEventListener('change', handleSystemChange);\n         };\n        // Rerun ONLY on mount. Theme state changes are handled internally or by observer.\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n\n    // ---- Core Theme Update Function ----\n    const applyThemeChange = useCallback((newTheme: 'dark' | 'light') => {\n        if (isTransitioning || !mounted) return;\n\n        const html = document.documentElement;\n        const currentTheme = html.classList.contains('dark') ? 'dark' : 'light';\n\n        if (newTheme === currentTheme) {\n            console.log('Theme already set to', newTheme);\n            // Ensure state is correct even if no change needed\n            if (theme !== newTheme) setThemeState(newTheme);\n            return;\n        }\n\n        console.log(`Applying theme change: ${currentTheme} -> ${newTheme}`);\n        setIsTransitioning(true);\n\n        // 1. Add transition class\n        html.classList.add('theme-transitioning');\n\n        // 2. Remove old theme class, add new theme class\n        html.classList.remove(currentTheme);\n        html.classList.add(newTheme);\n\n        // 3. Update color-scheme meta\n        html.style.setProperty('color-scheme', newTheme);\n\n        // 4. Update React State\n        setThemeState(newTheme);\n\n        // 5. Persist to localStorage\n        try {\n            localStorage.setItem('theme', newTheme);\n            console.log('Theme saved to localStorage:', newTheme);\n        } catch (e) {\n            console.error('Failed to save theme to localStorage:', e);\n        }\n\n        // 6. Remove transition class after CSS transition duration\n        // Ensure this duration matches your CSS transition time in theme.css\n        const transitionDuration = 300; // ms, match your CSS\n        setTimeout(() => {\n             html.classList.remove('theme-transitioning');\n             setIsTransitioning(false);\n             console.log(`Theme transition complete. Current theme: ${newTheme}`);\n        }, transitionDuration);\n\n    }, [isTransitioning, mounted, theme]); // Include 'theme' dependency for the check inside\n\n    // ---- Public Toggle Function ----\n    const toggleTheme = useCallback(() => {\n        const currentTheme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';\n        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';\n        console.log('Toggle theme called.');\n        applyThemeChange(newTheme);\n    }, [applyThemeChange]); // Depends on applyThemeChange\n\n    // ---- Public Set Function ----\n    const setTheme = useCallback((newTheme: 'dark' | 'light') => {\n         console.log('Set theme called with:', newTheme);\n        applyThemeChange(newTheme);\n    }, [applyThemeChange]); // Depends on applyThemeChange\n\n\n     // Expose toggle function globally if needed (optional)\n     useEffect(() => {\n         if (mounted) {\n             window.toggleTheme = toggleTheme;\n             return () => {\n                 delete window.toggleTheme;\n             };\n         }\n     }, [mounted, toggleTheme]);\n\n\n    // Provide a default non-functional context before mounting\n    const contextValue: ThemeContextProps = mounted\n        ? { isDarkMode: theme === 'dark', theme, setTheme, toggleTheme, mounted }\n        : {\n              isDarkMode: false, // Best guess before hydration\n              theme: 'light',\n              setTheme: () => console.warn(\"ThemeProvider not mounted yet.\"),\n              toggleTheme: () => console.warn(\"ThemeProvider not mounted yet.\"),\n              mounted: false\n          };\n\n    return (\n        <ThemeContext.Provider value={contextValue}>\n            {children}\n        </ThemeContext.Provider>\n    );\n};\n\n// ---- Hook ----\nexport const useTheme = (): ThemeContextProps => {\n    const context = useContext(ThemeContext);\n\n    if (context === undefined) {\n        // Provide a more informative fallback, but still log a warning\n        console.warn('useTheme must be used within a ThemeProvider. Providing default values.');\n\n        // Attempt a basic guess outside context (less reliable)\n        const isBrowser = typeof window !== 'undefined';\n        let ssrGuessIsDark = false;\n         if (isBrowser) {\n             try {\n                ssrGuessIsDark = localStorage.getItem('theme') === 'dark' ||\n                                 (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches);\n             } catch {} // Ignore localStorage errors here\n         }\n\n        return {\n            isDarkMode: ssrGuessIsDark,\n            theme: ssrGuessIsDark ? 'dark' : 'light',\n            setTheme: () => console.error('Cannot set theme: ThemeProvider context is missing.'),\n            toggleTheme: () => console.error('Cannot toggle theme: ThemeProvider context is missing.'),\n            mounted: false // Clearly indicate context isn't ready\n        };\n    }\n\n    return context;\n};","'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\n\ninterface NewsletterModalState {\n  hasSignedUp: boolean;\n  hasClickedNeverShow: boolean;\n  hasSeenModal: boolean;\n  lastShownDate: string | null;\n}\n\nconst STORAGE_KEY = 'blog-newsletter-modal-state';\nconst SCROLL_THRESHOLD = 0.25; // Show after scrolling 25% of page\nconst DELAY_MS = 3000; // Wait 3 seconds after scroll threshold\nconst COOLDOWN_DAYS = 1; // Don't show again for 1 day if dismissed\n\nexport function useBlogNewsletterModal() {\n  const [showModal, setShowModal] = useState(false);\n  const [hasScrolledEnough, setHasScrolledEnough] = useState(false);\n  const [timeoutId, setTimeoutId] = useState<NodeJS.Timeout | null>(null);\n\n  // Load state from localStorage\n  const loadState = useCallback((): NewsletterModalState => {\n    if (typeof window === 'undefined') {\n      return {\n        hasSignedUp: false,\n        hasClickedNeverShow: false,\n        hasSeenModal: false,\n        lastShownDate: null\n      };\n    }\n\n    try {\n      const stored = localStorage.getItem(STORAGE_KEY);\n      if (stored) {\n        return JSON.parse(stored);\n      }\n    } catch (error) {\n      console.warn('Failed to load newsletter modal state:', error);\n    }\n\n    return {\n      hasSignedUp: false,\n      hasClickedNeverShow: false,\n      hasSeenModal: false,\n      lastShownDate: null\n    };\n  }, []);\n\n  // Save state to localStorage\n  const saveState = useCallback((state: NewsletterModalState) => {\n    if (typeof window === 'undefined') return;\n\n    try {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));\n    } catch (error) {\n      console.warn('Failed to save newsletter modal state:', error);\n    }\n  }, []);\n\n  // Check if we should show the modal\n  const shouldShowModal = useCallback(() => {\n    const state = loadState();\n    \n    // Don't show if user has signed up or clicked never show\n    if (state.hasSignedUp || state.hasClickedNeverShow) {\n      return false;\n    }\n\n    // Check cooldown period\n    if (state.lastShownDate) {\n      const lastShown = new Date(state.lastShownDate);\n      const now = new Date();\n      const daysSince = (now.getTime() - lastShown.getTime()) / (1000 * 60 * 60 * 24);\n      \n      if (daysSince < COOLDOWN_DAYS) {\n        return false;\n      }\n    }\n\n    return true;\n  }, [loadState]);\n\n  // Handle scroll detection\n  const handleScroll = useCallback(() => {\n    const scrollTop = window.scrollY;\n    const windowHeight = window.innerHeight;\n    const documentHeight = document.documentElement.scrollHeight;\n    const scrollPercentage = scrollTop / (documentHeight - windowHeight);\n\n    if (scrollPercentage >= SCROLL_THRESHOLD && !hasScrolledEnough) {\n      setHasScrolledEnough(true);\n      \n      // Clear any existing timeout\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n\n      // Set timeout to show modal after delay\n      const newTimeoutId = setTimeout(() => {\n        if (shouldShowModal()) {\n          setShowModal(true);\n          \n          // Update last shown date\n          const state = loadState();\n          saveState({\n            ...state,\n            hasSeenModal: true,\n            lastShownDate: new Date().toISOString()\n          });\n        }\n      }, DELAY_MS);\n\n      setTimeoutId(newTimeoutId);\n    }\n  }, [hasScrolledEnough, timeoutId, shouldShowModal, loadState, saveState]);\n\n  // Set up scroll listener\n  useEffect(() => {\n    if (!shouldShowModal()) {\n      return;\n    }\n\n    window.addEventListener('scroll', handleScroll, { passive: true });\n    \n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [handleScroll, shouldShowModal, timeoutId]);\n\n  // Close modal handler\n  const closeModal = useCallback(() => {\n    setShowModal(false);\n  }, []);\n\n  // Never show again handler\n  const neverShowAgain = useCallback(() => {\n    const state = loadState();\n    saveState({\n      ...state,\n      hasClickedNeverShow: true\n    });\n    setShowModal(false);\n  }, [loadState, saveState]);\n\n  // Mark as signed up (call this when user successfully subscribes)\n  const markAsSignedUp = useCallback(() => {\n    const state = loadState();\n    saveState({\n      ...state,\n      hasSignedUp: true\n    });\n    setShowModal(false);\n  }, [loadState, saveState]);\n\n  // Reset state (for testing/debugging)\n  const resetState = useCallback(() => {\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem(STORAGE_KEY);\n    }\n  }, []);\n\n  return {\n    showModal,\n    closeModal,\n    neverShowAgain,\n    markAsSignedUp,\n    resetState\n  };\n}\n","'use client';\n\nimport { useState, useEffect } from 'react';\n\ninterface CookiePreferences {\n  essential: boolean;\n  analytics: boolean;\n  functional: boolean;\n  marketing: boolean;\n}\n\ninterface UseCookieConsentReturn {\n  hasConsent: boolean;\n  canUseMarketing: boolean;\n  canUseAnalytics: boolean;\n  canUseFunctional: boolean;\n  preferences: CookiePreferences | null;\n  updatePreferences: (newPrefs: Partial<CookiePreferences>) => void;\n  showBanner: () => void;\n}\n\nconst CONSENT_STORAGE_KEY = 'manic_cookie_consent';\nconst CONSENT_VERSION = '1.0';\n\nexport function useCookieConsent(): UseCookieConsentReturn {\n  const [preferences, setPreferences] = useState<CookiePreferences | null>(null);\n  const [hasConsent, setHasConsent] = useState(false);\n\n  useEffect(() => {\n    // Check for existing consent\n    const checkConsent = () => {\n      const savedConsent = localStorage.getItem(CONSENT_STORAGE_KEY);\n      if (savedConsent) {\n        try {\n          const { preferences: savedPrefs, version } = JSON.parse(savedConsent);\n          if (version === CONSENT_VERSION) {\n            setPreferences(savedPrefs);\n            setHasConsent(true);\n            // Update actual cookies based on preferences\n            updateCookieSettings(savedPrefs);\n            return;\n          }\n        } catch (e) {\n          console.warn('Invalid cookie consent data');\n        }\n      }\n      setHasConsent(false);\n    };\n\n    checkConsent();\n\n    // Listen for consent changes\n    const handleConsentChange = () => checkConsent();\n    window.addEventListener('cookie-consent-updated', handleConsentChange);\n    \n    return () => {\n      window.removeEventListener('cookie-consent-updated', handleConsentChange);\n    };\n  }, []);\n\n  const updateCookieSettings = (prefs: CookiePreferences) => {\n    // Set consent tracking cookie\n    document.cookie = `manic_consent=true; path=/; max-age=${60 * 60 * 24 * 365}; SameSite=Lax`;\n    \n    if (prefs.analytics) {\n      // Enable analytics cookies\n      document.cookie = `manic_analytics=enabled; path=/; max-age=${60 * 60 * 24 * 365}; SameSite=Lax`;\n      // Initialize analytics if available\n      if (typeof window !== 'undefined' && window.gtag) {\n        window.gtag('consent', 'update', {\n          'analytics_storage': 'granted'\n        });\n      }\n      if (typeof window !== 'undefined' && (window as any).clarity) {\n        try { (window as any).clarity('consent', true); } catch {}\n      }\n    } else {\n      // Clear analytics cookies\n      document.cookie = `manic_analytics=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT`;\n      if (typeof window !== 'undefined' && window.gtag) {\n        window.gtag('consent', 'update', {\n          'analytics_storage': 'denied'\n        });\n      }\n      if (typeof window !== 'undefined' && (window as any).clarity) {\n        try { (window as any).clarity('consent', false); } catch {}\n      }\n    }\n    \n    if (prefs.marketing) {\n      // Enable marketing cookies (newsletter, etc.)\n      document.cookie = `manic_marketing=enabled; path=/; max-age=${60 * 60 * 24 * 365}; SameSite=Lax`;\n    } else {\n      // Clear marketing cookies\n      document.cookie = `manic_marketing=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT`;\n    }\n    \n    if (prefs.functional) {\n      // Enable functional cookies (form submissions, etc.)\n      document.cookie = `manic_functional=enabled; path=/; max-age=${60 * 60 * 24 * 365}; SameSite=Lax`;\n    } else {\n      // Clear functional cookies\n      document.cookie = `manic_functional=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT`;\n    }\n  };\n\n  const updatePreferences = (newPrefs: Partial<CookiePreferences>) => {\n    const currentPrefs = preferences || {\n      essential: true,\n      analytics: false,\n      functional: false,\n      marketing: false,\n    };\n    \n    const updatedPrefs = { ...currentPrefs, ...newPrefs };\n    setPreferences(updatedPrefs);\n    setHasConsent(true);\n    \n    // Save to localStorage\n    const consentData = {\n      preferences: updatedPrefs,\n      version: CONSENT_VERSION,\n      timestamp: Date.now()\n    };\n    \n    localStorage.setItem(CONSENT_STORAGE_KEY, JSON.stringify(consentData));\n    \n    // Update actual cookies\n    updateCookieSettings(updatedPrefs);\n    \n    // Trigger event for other components\n    window.dispatchEvent(new CustomEvent('cookie-consent-updated'));\n  };\n\n  const showBanner = () => {\n    // Trigger banner display by clearing consent\n    localStorage.removeItem(CONSENT_STORAGE_KEY);\n    setHasConsent(false);\n    setPreferences(null);\n    window.dispatchEvent(new CustomEvent('cookie-consent-show-banner'));\n  };\n\n  return {\n    hasConsent,\n    canUseMarketing: hasConsent && (preferences?.marketing ?? false),\n    canUseAnalytics: hasConsent && (preferences?.analytics ?? false),\n    canUseFunctional: hasConsent && (preferences?.functional ?? false),\n    preferences,\n    updatePreferences,\n    showBanner\n  };\n}\n"],"names":["ThemeContext","createContext","undefined","ThemeProvider","children","param","theme","setThemeState","useState","mounted","setMounted","isTransitioning","setIsTransitioning","useEffect","initializeTheme","initialTheme","localStorage","getItem","window","matchMedia","matches","document","documentElement","classList","contains","e","console","warn","log","concat","remove","add","style","setProperty","requestAnimationFrame","setAttribute","observer","MutationObserver","mutations","forEach","mutation","attributeName","currentTheme","newIsDark","observe","attributes","mediaQuery","handleSystemChange","newSystemTheme","setTheme","error","addEventListener","disconnect","removeEventListener","applyThemeChange","useCallback","html","newTheme","setItem","setTimeout","toggleTheme","contextValue","isDarkMode","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","Provider","value","useTheme","context","useContext","ssrGuessIsDark","STORAGE_KEY","useBlogNewsletterModal","showModal","setShowModal","hasScrolledEnough","setHasScrolledEnough","timeoutId","setTimeoutId","loadState","stored","JSON","parse","hasSignedUp","hasClickedNeverShow","hasSeenModal","lastShownDate","saveState","stringify","state","shouldShowModal","lastShown","Date","daysSince","now","getTime","handleScroll","scrollTop","scrollY","windowHeight","innerHeight","documentHeight","scrollHeight","clearTimeout","toISOString","passive","closeModal","neverShowAgain","markAsSignedUp","resetState","removeItem","CONSENT_STORAGE_KEY","useCookieConsent","preferences","setPreferences","hasConsent","setHasConsent","checkConsent","savedConsent","savedPrefs","version","updateCookieSettings","handleConsentChange","cookie","prefs","analytics","gtag","clarity","marketing","functional","canUseMarketing","canUseAnalytics","canUseFunctional","updatePreferences","updatedPrefs","essential","newPrefs","consentData","timestamp","dispatchEvent","CustomEvent","showBanner"],"sourceRoot":""}