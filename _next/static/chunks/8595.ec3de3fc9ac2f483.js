"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8595],{78595:function(e,r,n){n.r(r),n.d(r,{default:function(){return a}});var t=n(57437),i=n(2265),o=n(48614),d=n(97655);function a(e){let{formId:r,className:n="",fallbackUrl:a}=e,s=function(){let e=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let r=e.current;if(!r)return;let n=r.removeChild.bind(r),t=r.appendChild.bind(r),i=r.insertBefore.bind(r);return r.removeChild=function(e){try{if(e.nodeType===Node.ELEMENT_NODE){let r=e;for(;r;){if(r.getAttribute&&"true"===r.getAttribute("data-react-unmanaged"))return console.log("\uD83D\uDEE1️ Prevented React from removing unmanaged DOM node"),e;r=r.parentElement}}return n(e)}catch(r){return console.log("\uD83D\uDEE1️ Caught removeChild error, likely due to Sender.net DOM manipulation:",r),e}},r.appendChild=function(e){let r=t.call(this,e);return e.nodeType===Node.ELEMENT_NODE&&e.setAttribute&&e.setAttribute("data-react-unmanaged","true"),r},()=>{r&&(r.removeChild=n,r.appendChild=t,r.insertBefore=i)}},[]),e}(),[l,m]=(0,i.useState)("loading"),u=(0,i.useRef)(!1),c=(0,i.useRef)(0);return(0,i.useEffect)(()=>{let e;if(!r||""===r.trim()){console.error("\uD83D\uDD34 No formId provided to SenderNewsletterForm"),m("error");return}if(u.current||!s.current)return;u.current=!0;let n=!0,t=s.current,i=e=>{e.setAttribute("data-react-unmanaged","true"),e.setAttribute("data-sender-managed","true"),Array.from(e.children).forEach(i)},o=new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{e.nodeType===Node.ELEMENT_NODE&&(i(e),console.log("\uD83D\uDD27 Marked dynamically added node as unmanaged"))})})}),d=document.createElement("div");d.setAttribute("data-react-unmanaged","true"),d.setAttribute("data-sender-wrapper","true"),d.style.cssText="position: relative; width: 100%; min-height: 200px; padding: 0; margin: 0; box-sizing: border-box;";let a=document.createElement("div");a.setAttribute("data-react-unmanaged","true"),a.setAttribute("data-sender-container","true"),a.innerHTML='\n      <div style="text-align: left; width: 100%; padding: 0; margin: 0; box-sizing: border-box;" \n           class="sender-form-field" \n           data-sender-form-id="'.concat(r,'"\n           data-react-unmanaged="true">\n      </div>\n      <style>\n        .sender-form-field iframe,\n        .sender-form-field form,\n        .sender-form-field div,\n        .sender-form-field input,\n        .sender-form-field button {\n          width: 100% !important;\n          max-width: 100% !important;\n          margin: 0 !important;\n          padding: 12px !important;\n          box-sizing: border-box !important;\n        }\n        .sender-form-field {\n          width: 100% !important;\n          max-width: 100% !important;\n          margin: 0 !important;\n          padding: 0 !important;\n          box-sizing: border-box !important;\n        }\n        /* Override Sender.net\'s fixed width */\n        .sender-form-box {\n          width: 100% !important;\n          max-width: 100% !important;\n          margin: 0 !important;\n          box-sizing: border-box !important;\n        }\n        .sender-subs-embed-form-dBBEwn .sender-form-box {\n          width: 100% !important;\n          max-width: 100% !important;\n          margin: 0 !important;\n          box-sizing: border-box !important;\n        }\n        /* Mobile-specific overrides */\n        @media (max-width: 768px) {\n          .sender-form-box {\n            width: 100% !important;\n            max-width: 100% !important;\n            margin: 0 !important;\n            border-radius: 0 !important;\n          }\n          .sender-form-field,\n          .sender-form-field iframe,\n          .sender-form-field form,\n          .sender-form-field div {\n            width: 100% !important;\n            max-width: 100% !important;\n            margin: 0 !important;\n            border-radius: 0 !important;\n          }\n          .sender-form-field input,\n          .sender-form-field button {\n            width: 100% !important;\n            max-width: 100% !important;\n            margin: 0 !important;\n            padding: 12px !important;\n            border-radius: 5px !important;\n            box-sizing: border-box !important;\n          }\n        }\n      </style>\n    '),d.appendChild(a),t.innerHTML="",t.appendChild(d),i(d),i(a),o.observe(d,{childList:!0,subtree:!0,attributes:!1});let l=()=>{if(!n)return!1;if(c.current++,console.log("\uD83D\uDD04 Render attempt ".concat(c.current,"/").concat(20)),!window.sender||"function"!=typeof window.sender)return console.log("⏳ Waiting for sender..."),!1;try{return window.sender(),window.sender("init"),window.sender("render"),window.sender("scan"),window.sender("refresh"),window.sender("form",r),window.sender(r),console.log("✅ Called all sender methods"),setTimeout(()=>{if(!n)return;let e=a.querySelector(".sender-form-field");(null==e?void 0:e.querySelector("iframe"))||(null==e?void 0:e.querySelector("form"))||(null==e?void 0:e.querySelector("input"))||e&&e.children.length>0?(console.log("✅ Form rendered successfully!"),i(e),m("success")):c.current>=20&&(console.error("\uD83D\uDD34 Max attempts reached, form failed to render"),m("error"))},1e3),!0}catch(e){return console.error("\uD83D\uDD34 Error rendering form:",e),!1}};l(),e=setInterval(()=>{if(!n||c.current>=20){clearInterval(e);return}l()},500);let f=()=>l();return window.addEventListener("load",f),window.addEventListener("onSenderFormsLoaded",f),()=>{n=!1,e&&clearInterval(e),window.removeEventListener("load",f),window.removeEventListener("onSenderFormsLoaded",f),o.disconnect();let r=t.querySelector('[data-loading-overlay="true"]');r&&r.remove()}},[r]),(0,t.jsxs)("div",{className:"".concat(n," w-full"),style:{width:"100%",padding:0,margin:0},children:[(0,t.jsx)("div",{ref:s,className:"sender-form-container w-full",style:{minHeight:"loading"===l?"300px":"auto",width:"100%",padding:"0",margin:"0"},suppressHydrationWarning:!0,"data-react-unmanaged":"true",children:"loading"===l&&!u.current&&(0,t.jsx)("div",{className:"flex items-center justify-center h-64","data-loading-overlay":"true",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading newsletter form..."})]})})}),(0,t.jsx)(o.M,{children:"error"===l&&(0,t.jsxs)(d.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-4 p-6 border rounded-lg ".concat(r&&""!==r.trim()?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200"),children:[(0,t.jsx)("h3",{className:"font-semibold mb-2 ".concat(r&&""!==r.trim()?"text-red-800":"text-yellow-800"),children:r&&""!==r.trim()?"Newsletter form couldn't load":"Newsletter form configuration missing"}),(0,t.jsx)("p",{className:"text-sm mb-4 ".concat(r&&""!==r.trim()?"text-red-600":"text-yellow-600"),children:r&&""!==r.trim()?"This might be due to ad blockers or network issues.":"The NEXT_PUBLIC_SENDER_FORM_ID environment variable is not configured."}),a?(0,t.jsxs)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 text-white rounded hover:opacity-90 transition-colors ".concat(r&&""!==r.trim()?"bg-red-600 hover:bg-red-700":"bg-yellow-600 hover:bg-yellow-700"),children:["Subscribe via web form",(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}):r&&""!==r.trim()?(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"Try Again"}):(0,t.jsx)("p",{className:"text-sm text-yellow-700",children:"Please contact the site administrator to set up the newsletter form."})]})})]})}}}]);